{"id":"vibedj-3dg","title":"Epic: Reorganize test files for better structure and maintainability","status":"open","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:45:52.521685-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T13:45:52.521685-05:00","comments":[{"id":8,"issue_id":"vibedj-3dg","author":"Nick Seward","text":"Analysis: tests/test_api.py (949 lines) sits at root of tests/ instead of tests/unit/api/. Contains 7 test classes covering 5 different API concerns. UI test files are co-located with source in ui/src/components/ and ui/src/context/ instead of using the existing ui/src/test/ directory. Plan: Split test_api.py into 5 focused files under tests/unit/api/, move all UI .test.tsx files under ui/src/test/ mirroring source structure, update vitest config if needed.","created_at":"2026-02-07T18:45:59Z"},{"id":23,"issue_id":"vibedj-3dg","author":"Nick Seward","text":"Dependency ordering for all work: (1) unittest→pytest conversions (vibedj-3dg.11-14) should be done FIRST since they touch files in-place without moving them. (2) Then create conftest.py (vibedj-3dg.6). (3) Then split test_api.py into separate files (vibedj-3dg.1-5). (4) Delete test_api.py (vibedj-3dg.7). (5) Move UI tests (vibedj-3dg.8-9). (6) Final verification (vibedj-3dg.10). Rationale: doing conversions first avoids having to convert AND move files simultaneously, reducing merge conflict risk.","created_at":"2026-02-07T18:53:37Z"}]}
{"id":"vibedj-3dg.1","title":"Split test_api.py: Extract TestRootEndpoints into tests/unit/api/test_root_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:03.882257-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:45.608548-05:00","closed_at":"2026-02-07T19:21:45.608548-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.1","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:03.884106-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.1","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:06.134842-05:00","created_by":"Nick Seward"}],"comments":[{"id":9,"issue_id":"vibedj-3dg.1","author":"Nick Seward","text":"Extract TestRootEndpoints class (lines 100-126 of test_api.py) into tests/unit/api/test_root_routes.py. This class tests the root endpoint (/) and health check endpoint (/health). Will need the shared fixtures (test_config, client) — consider creating a conftest.py in tests/unit/api/ for shared fixtures.","created_at":"2026-02-07T18:46:10Z"},{"id":25,"issue_id":"vibedj-3dg.1","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:54:59Z"}]}
{"id":"vibedj-3dg.10","title":"Final verification: Run all Python and UI tests after reorganization","status":"open","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:45.985436-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T13:47:45.985436-05:00","dependencies":[{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:45.987705-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg.7","type":"blocks","created_at":"2026-02-07T13:58:23.593301-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg.8","type":"blocks","created_at":"2026-02-07T13:58:24.355641-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg.9","type":"blocks","created_at":"2026-02-07T13:58:25.472232-05:00","created_by":"Nick Seward"}],"comments":[{"id":18,"issue_id":"vibedj-3dg.10","author":"Nick Seward","text":"Final step after all reorganization is complete. Run: 'make test \u0026\u0026 cd ui \u0026\u0026 npm run test:run'. Verify same number of tests pass as before reorganization. Check that no test files remain in their old locations. Verify no duplicate test coverage.","created_at":"2026-02-07T18:47:51Z"},{"id":31,"issue_id":"vibedj-3dg.10","author":"Nick Seward","text":"DEPENDENCY: Do this LAST, after ALL other sibling beads (vibedj-3dg.1-9, .11-14) are complete. This is the final verification step.","created_at":"2026-02-07T18:55:10Z"}]}
{"id":"vibedj-3dg.11","title":"Convert tests/unit/core/ from unittest to pytest style (4 files)","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:52:46.344417-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T18:52:26.196349-05:00","closed_at":"2026-02-07T18:52:26.196363-05:00","dependencies":[{"issue_id":"vibedj-3dg.11","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:52:46.346008-05:00","created_by":"Nick Seward"}],"comments":[{"id":19,"issue_id":"vibedj-3dg.11","author":"Nick Seward","text":"Convert 4 files from unittest.TestCase to pytest style: test_analyzer.py (144 lines, 8 tests), test_database.py (396 lines, 18 tests), test_indexer.py (328 lines, 14 tests), test_similarity.py (129 lines, 11 tests). Conversion pattern: remove unittest.TestCase inheritance, convert setUp/tearDown to pytest fixtures (use @pytest.fixture(autouse=True) or conftest.py), replace self.assertEqual→assert ==, self.assertTrue→assert, self.assertIsNone→assert is None, self.assertRaises→pytest.raises, etc. Remove if __name__==__main__ blocks. test_database.py and test_similarity.py have tearDown methods that need yield-based fixtures for cleanup.","created_at":"2026-02-07T18:52:54Z"},{"id":32,"issue_id":"vibedj-3dg.11","author":"Nick Seward","text":"Session 2026-02-07: Converted all 4 files (test_analyzer.py, test_database.py, test_indexer.py, test_similarity.py) from unittest.TestCase to idiomatic pytest. Pattern: removed class wrappers, setUp/tearDown → pytest fixtures (yield-based where cleanup needed), self.assertX → plain assert, self.assertRaises → pytest.raises. All 189 Python tests + 56 UI tests pass. Committed as c42722d and pushed.","created_at":"2026-02-07T23:52:32Z"}]}
{"id":"vibedj-3dg.12","title":"Convert tests/unit/models/ from unittest to pytest style (4 files)","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:52:58.507452-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T18:59:15.082989-05:00","closed_at":"2026-02-07T18:59:15.082989-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.12","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:52:58.51062-05:00","created_by":"Nick Seward"}],"comments":[{"id":20,"issue_id":"vibedj-3dg.12","author":"Nick Seward","text":"Convert 4 files from unittest.TestCase to pytest style: test_config.py (102 lines, 7 tests), test_features.py (48 lines, 4 tests), test_playlist.py (92 lines, 7 tests), test_song.py (58 lines, 3 tests). These are simple model tests. test_config.py and test_playlist.py have setUp methods. test_config.py uses self.assertRaises for ValueError checks — convert to pytest.raises. All use self.assert* patterns. No tearDown needed.","created_at":"2026-02-07T18:53:05Z"},{"id":33,"issue_id":"vibedj-3dg.12","author":"Nick Seward","text":"Session 2026-02-07: Converted all 4 files (test_config.py, test_features.py, test_playlist.py, test_song.py) from unittest.TestCase to idiomatic pytest. Pattern: removed class wrappers, setUp → @pytest.fixture() returning tuple, self.assertX → plain assert, self.assertRaises → pytest.raises(match=...). All 189 Python tests + 56 UI tests pass. Committed as 69d75c7 and pushed.","created_at":"2026-02-07T23:59:20Z"}]}
{"id":"vibedj-3dg.13","title":"Convert tests/unit/services/ unittest files to pytest style (2 files)","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:53:12.010229-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:07:23.854729-05:00","closed_at":"2026-02-07T19:07:23.854729-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.13","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:53:12.011966-05:00","created_by":"Nick Seward"}],"comments":[{"id":21,"issue_id":"vibedj-3dg.13","author":"Nick Seward","text":"Convert 2 files from unittest.TestCase to pytest style: test_playlist_exporter.py (160 lines, 7 tests), test_playlist_generator.py (342 lines, 12 tests). Note: test_navidrome_client.py and test_navidrome_sync_service.py already use pytest style — no changes needed. Both files have setUp methods to convert to fixtures. test_playlist_exporter.py uses self.assertRaises for ValueError. test_playlist_generator.py uses self.assertRaises and np.testing assertions (keep np.testing as-is, only convert unittest patterns).","created_at":"2026-02-07T18:53:18Z"},{"id":34,"issue_id":"vibedj-3dg.13","author":"Nick Seward","text":"Session 2026-02-07: Converted both files (test_playlist_exporter.py, test_playlist_generator.py) from unittest.TestCase to idiomatic pytest. Pattern: removed class wrappers, setUp → @pytest.fixture() returning tuples, self.assertX → plain assert, self.assertRaises → pytest.raises. Kept np.testing and unittest.mock. All 189 Python tests + 56 UI tests pass. Committed as 5ff6714 and pushed.","created_at":"2026-02-08T00:07:30Z"}]}
{"id":"vibedj-3dg.14","title":"Convert tests/integration/test_resumable_indexing.py from unittest to pytest style","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:53:23.348183-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:10:51.345764-05:00","closed_at":"2026-02-07T19:10:51.345764-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.14","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:53:23.350204-05:00","created_by":"Nick Seward"}],"comments":[{"id":22,"issue_id":"vibedj-3dg.14","author":"Nick Seward","text":"Convert test_resumable_indexing.py (141 lines, 3 tests) from unittest.TestCase to pytest. Has setUp (creates temp dirs, config, audio files) and tearDown (shutil.rmtree cleanup) — convert to a yield-based pytest fixture. Replace self.assertEqual→assert ==. Remove unittest.main() block.","created_at":"2026-02-07T18:53:28Z"},{"id":35,"issue_id":"vibedj-3dg.14","author":"Nick Seward","text":"Session 2026-02-07: Converted test_resumable_indexing.py from unittest.TestCase to idiomatic pytest. setUp+tearDown → yield-based @pytest.fixture() with cleanup after yield, inlined helper, self.assertEqual → assert ==. All 189 Python tests + 56 UI tests pass. Committed as a116038 and pushed. This completes all unittest→pytest conversions (vibedj-3dg.11-14).","created_at":"2026-02-08T00:10:57Z"}]}
{"id":"vibedj-3dg.2","title":"Split test_api.py: Extract TestIndexEndpoints and TestRunIndexingJob into tests/unit/api/test_index_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:16.081761-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:45.758292-05:00","closed_at":"2026-02-07T19:21:45.758292-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.2","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:16.083463-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.2","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:07.163606-05:00","created_by":"Nick Seward"}],"comments":[{"id":10,"issue_id":"vibedj-3dg.2","author":"Nick Seward","text":"Extract TestIndexEndpoints (lines 128-207) and TestRunIndexingJob (lines 210-316) into tests/unit/api/test_index_routes.py. Both classes test indexing-related functionality: TestIndexEndpoints tests the /api/index and /api/status endpoints, TestRunIndexingJob tests the run_indexing_job background function directly. Needs fixtures: test_config, client, mock_job_manager. Shares fixtures with conftest.py.","created_at":"2026-02-07T18:46:21Z"},{"id":26,"issue_id":"vibedj-3dg.2","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:55:00Z"}]}
{"id":"vibedj-3dg.3","title":"Split test_api.py: Extract TestPlaylistEndpoints into tests/unit/api/test_playlist_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:25.383039-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:45.909005-05:00","closed_at":"2026-02-07T19:21:45.909005-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.3","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:25.385624-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.3","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:08.076332-05:00","created_by":"Nick Seward"}],"comments":[{"id":11,"issue_id":"vibedj-3dg.3","author":"Nick Seward","text":"Extract TestPlaylistEndpoints (lines 318-489) into tests/unit/api/test_playlist_routes.py. Tests: generate_playlist_success, generate_playlist_invalid_seeds, generate_playlist_no_results, export_playlist_success, export_playlist_song_not_found. Needs fixtures: test_config, client, test_db. Uses get_playlist_generator, get_playlist_exporter, get_config dependency overrides.","created_at":"2026-02-07T18:46:31Z"},{"id":27,"issue_id":"vibedj-3dg.3","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:55:01Z"}]}
{"id":"vibedj-3dg.4","title":"Split test_api.py: Extract TestSongsEndpoints and TestSearchSongsMultiEndpoint into tests/unit/api/test_songs_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:35.042347-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:46.042943-05:00","closed_at":"2026-02-07T19:21:46.042943-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.4","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:35.044267-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.4","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:09.196931-05:00","created_by":"Nick Seward"}],"comments":[{"id":12,"issue_id":"vibedj-3dg.4","author":"Nick Seward","text":"Extract TestSongsEndpoints (lines 491-693) and TestSearchSongsMultiEndpoint (lines 696-873) into tests/unit/api/test_songs_routes.py. TestSongsEndpoints covers: list_songs_default, list_songs_with_pagination, list_songs_with_search, get_song_by_id_success, get_song_by_id_not_found, get_song_without_features. TestSearchSongsMultiEndpoint covers: default_pagination, custom_pagination, max_limit, max_depth_exceeded, at_max_depth, requires_at_least_one_param, page_size_options. Both use get_db dependency override.","created_at":"2026-02-07T18:46:41Z"},{"id":28,"issue_id":"vibedj-3dg.4","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:55:02Z"}]}
{"id":"vibedj-3dg.5","title":"Split test_api.py: Extract TestBackgroundJobManager into tests/unit/api/test_background.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:47.274352-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:46.192994-05:00","closed_at":"2026-02-07T19:21:46.192994-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.5","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:47.276835-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.5","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:10.453281-05:00","created_by":"Nick Seward"}],"comments":[{"id":13,"issue_id":"vibedj-3dg.5","author":"Nick Seward","text":"Extract TestBackgroundJobManager (lines 876-944) into tests/unit/api/test_background.py. This class tests the JobManager directly (not via HTTP endpoints): create_job, start_job, update_progress, complete_job, fail_job, get_nonexistent_job. No shared fixtures needed — it creates its own JobManager instances. Could alternatively go in tests/unit/core/ but since JobManager lives in src/vibe_dj/api/background.py, tests/unit/api/ is the correct location.","created_at":"2026-02-07T18:46:53Z"},{"id":29,"issue_id":"vibedj-3dg.5","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete.","created_at":"2026-02-07T18:55:03Z"}]}
{"id":"vibedj-3dg.6","title":"Create shared conftest.py for tests/unit/api/ with common fixtures","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:58.703056-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:17:09.826606-05:00","closed_at":"2026-02-07T19:17:09.826606-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:58.704875-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.11","type":"blocks","created_at":"2026-02-07T13:57:57.954249-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.12","type":"blocks","created_at":"2026-02-07T13:57:58.879885-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.13","type":"blocks","created_at":"2026-02-07T13:57:59.967714-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.14","type":"blocks","created_at":"2026-02-07T13:58:01.030054-05:00","created_by":"Nick Seward"}],"comments":[{"id":14,"issue_id":"vibedj-3dg.6","author":"Nick Seward","text":"Create tests/unit/api/conftest.py with shared fixtures extracted from test_api.py: test_config (creates temp DB path, yields Config, cleans up), test_db (creates MusicDatabase with 2 sample songs+features), client (TestClient with dependency override for get_config), mock_job_manager (JobManager instance). This task should be done FIRST before the split tasks, as the new test files will import from conftest. The existing test_config_routes.py has its own client fixture which is fine to keep.","created_at":"2026-02-07T18:47:05Z"},{"id":24,"issue_id":"vibedj-3dg.6","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.11-14 (unittest→pytest conversions) are complete. The conftest.py should be written in pytest style from the start.","created_at":"2026-02-07T18:54:57Z"},{"id":36,"issue_id":"vibedj-3dg.6","author":"Nick Seward","text":"Completed: Created tests/unit/api/conftest.py with 4 shared fixtures (test_config, test_db, client, mock_job_manager) extracted verbatim from tests/test_api.py. All 56 tests pass (24 unit/api + 32 test_api). Ruff clean. Commit 7cb6e77.","created_at":"2026-02-08T00:17:15Z"}]}
{"id":"vibedj-3dg.7","title":"Delete tests/test_api.py after all split tasks are complete","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:10.797384-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:46.478465-05:00","closed_at":"2026-02-07T19:21:46.478465-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:10.799463-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.1","type":"blocks","created_at":"2026-02-07T13:58:14.901402-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.2","type":"blocks","created_at":"2026-02-07T13:58:15.902685-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.3","type":"blocks","created_at":"2026-02-07T13:58:16.827118-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.4","type":"blocks","created_at":"2026-02-07T13:58:17.864779-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.5","type":"blocks","created_at":"2026-02-07T13:58:18.849522-05:00","created_by":"Nick Seward"}],"comments":[{"id":15,"issue_id":"vibedj-3dg.7","author":"Nick Seward","text":"After all split tasks (vibedj-3dg.1 through vibedj-3dg.5) are complete and tests pass, delete the original tests/test_api.py file. Run 'uv run pytest -v' to verify all tests still pass after deletion. This is the final cleanup step for the Python test reorganization.","created_at":"2026-02-07T18:47:16Z"},{"id":30,"issue_id":"vibedj-3dg.7","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.1-5 (all split tasks) are complete. Only delete test_api.py once all tests have been extracted and pass in their new locations.","created_at":"2026-02-07T18:55:08Z"}]}
{"id":"vibedj-3dg.8","title":"Move UI component tests from ui/src/components/ to ui/src/test/components/","status":"open","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:21.414574-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T13:47:21.414574-05:00","dependencies":[{"issue_id":"vibedj-3dg.8","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:21.417806-05:00","created_by":"Nick Seward"}],"comments":[{"id":16,"issue_id":"vibedj-3dg.8","author":"Nick Seward","text":"Move 4 test files from ui/src/components/ to ui/src/test/components/: ConfigScreen.test.tsx (229 lines), MusicTab.test.tsx (267 lines), SearchForm.test.tsx (91 lines), SearchResults.test.tsx (226 lines). Create the ui/src/test/components/ directory. Update import paths in each file — they use relative imports like './ConfigScreen' which will need to become '@/components/ConfigScreen'. The vitest config already uses '@' alias pointing to ui/src/. Verify tests still pass with 'npm run test:run'.","created_at":"2026-02-07T18:47:29Z"}]}
{"id":"vibedj-3dg.9","title":"Move UI context tests from ui/src/context/ to ui/src/test/context/","status":"open","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:35.3876-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T13:47:35.3876-05:00","dependencies":[{"issue_id":"vibedj-3dg.9","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:35.390304-05:00","created_by":"Nick Seward"}],"comments":[{"id":17,"issue_id":"vibedj-3dg.9","author":"Nick Seward","text":"Move ChoiceListContext.test.tsx (117 lines) from ui/src/context/ to ui/src/test/context/. Create the ui/src/test/context/ directory. Update the relative import from './ChoiceListContext' to '@/context/ChoiceListContext'. Verify tests still pass with 'npm run test:run'.","created_at":"2026-02-07T18:47:41Z"}]}
{"id":"vibedj-8z4","title":"Search Results Pagination Navigation At Top and Bottom","description":"The search results are paginated but the controls to navigate the pagination are only at the bottom of the page. This is not user friendly as the user has to scroll to the bottom of the page to navigate to the next page of results.","design":"- Add pagination controls to the top of the search results page (in addition to the existing bottom controls).\n- Pagination controls should appear at both top and bottom of search results.\n- The pagination controls should be hidden when there is only one page of results.\n- No sticky behavior needed—controls remain at their fixed top/bottom positions.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-04T21:03:51.360502-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T19:57:52.150461-05:00","closed_at":"2026-02-05T19:19:37.345581-05:00"}
{"id":"vibedj-ac0","title":"SubSonic Connection Test Button Enable Fix","description":"The SubSonic settings have a button that allows the user to test the connection to the SubSonic server. Currently, the \"Test Connection\" button is only enabled if the password field has user-typed content. However, when a password is already stored in settings (displayed as stars), the button remains disabled even though valid credentials exist. This is a bug.","design":"- Keep the current behavior where the password field shows stars if a password is stored in settings.\n- The \"Test Connection\" button should be enabled if:\n  - The password field has user-typed content, OR\n  - A password is already stored in the settings\n- When testing the connection:\n  - Use the newly typed password if the user has entered one (takes precedence)\n  - Otherwise, use the password stored in settings\n- Error and success feedback are already handled by the existing implementation.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-04T21:03:57.965905-05:00","created_by":"Nick Seward","updated_at":"2026-02-04T21:20:41.482146-05:00","closed_at":"2026-02-04T21:20:41.482146-05:00","close_reason":"Closed"}
{"id":"vibedj-cq0","title":"Epic: Replace tqdm with real-time progress reporting for music indexing","description":"Remove tqdm dependency from LibraryIndexer and replace it with a progress callback mechanism that reports real-time indexing progress (phase, processed count, total count) back to the UI via the JobManager polling system. Currently the indexer uses tqdm for CLI progress bars and the UI only sees coarse status messages (scanning/completed). After this work, the UI will show per-file progress like 'Analyzing audio (42/200)' for each indexing phase.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:03.580892-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:50:47.508359-05:00","closed_at":"2026-02-06T21:50:47.508359-05:00","close_reason":"Closed"}
{"id":"vibedj-cq0.1","title":"Add progress callback to LibraryIndexer and remove tqdm","description":"Add an optional progress_callback parameter (Callable[[str, int, int], None] for phase/processed/total) to index_library() and thread it through extract_metadata_phase() and extract_features_phase(). Remove tqdm from both loops and replace with callback invocations. Remove tqdm import. Update all existing Python tests for the indexer to account for the new callback parameter.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:18.629659-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:10:41.824832-05:00","closed_at":"2026-02-06T21:10:41.824832-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.1","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:18.631529-05:00","created_by":"Nick Seward"}],"comments":[{"id":1,"issue_id":"vibedj-cq0.1","author":"Nick Seward","text":"Key files: src/vibe_dj/core/indexer.py (main changes), tests/ directory for indexer tests (check tests/unit/core/). tqdm is used in two places: extract_metadata_phase() line ~106 wraps the file loop, and extract_features_phase() lines ~162-163 wraps the as_completed loop. Both should be replaced with callback invocations. The callback signature Callable[[str, int, int], None] maps to (phase_name, processed_count, total_count). Make the callback optional so CLI/direct usage still works without one. This bead has no sibling dependencies and can be worked first.","created_at":"2026-02-07T01:20:34Z"},{"id":5,"issue_id":"vibedj-cq0.1","author":"Nick Seward","text":"Session hand-off [2026-02-06]: Completed all work. Removed tqdm import from indexer.py, added optional progress_callback parameter (Callable[[str, int, int], None]) to extract_metadata_phase(), extract_features_phase(), and index_library(). Callback receives (phase_name, processed_count, total_count). Added 2 new tests verifying callback invocation. All 187 Python + 47 UI tests pass. Commit 726c57c pushed to origin/master. Next: vibedj-cq0.2 wires the callback into run_indexing_job via JobManager.","created_at":"2026-02-07T02:10:48Z"}]}
{"id":"vibedj-cq0.2","title":"Wire progress callback into run_indexing_job via JobManager","description":"In run_indexing_job (api/routes/index.py), create a progress callback closure that calls job_manager.update_progress() with structured data (phase, processed, total, message). Pass this callback to indexer.index_library(). Update the progress updates to report per-phase granular status instead of just 'Scanning music library...'. Update Python API/route tests to verify progress updates are called during indexing.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:24.701038-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:29:05.28505-05:00","closed_at":"2026-02-06T21:29:05.28505-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.2","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:24.702788-05:00","created_by":"Nick Seward"}],"comments":[{"id":2,"issue_id":"vibedj-cq0.2","author":"Nick Seward","text":"Depends on vibedj-cq0.1 being completed first (needs the callback parameter on index_library). Key files: src/vibe_dj/api/routes/index.py (run_indexing_job function), src/vibe_dj/api/background.py (JobManager.update_progress). Tests: check tests/ for API route tests (likely tests/unit/api/ or tests/test_api.py). The callback closure should call job_manager.update_progress(job_id, dict) where dict contains keys: phase (str), processed (int), total (int), message (str). Example: {'phase': 'features', 'processed': 42, 'total': 200, 'message': 'Analyzing audio (42/200)'}.","created_at":"2026-02-07T01:20:36Z"},{"id":6,"issue_id":"vibedj-cq0.2","author":"Nick Seward","text":"Session hand-off [2026-02-06]: Completed. Created progress_callback closure in run_indexing_job that calls job_manager.update_progress() with structured dict (phase, processed, total, message). Phase labels: metadata='Extracting metadata', features='Analyzing audio'. Passed callback to indexer.index_library(). Added 2 tests in TestRunIndexingJob: one with real JobManager, one with mock verifying exact call sequence (scanning→metadata→features→completed). All 189 Python + 47 UI tests pass. Commit 986732b pushed. Next: vibedj-cq0.3 (UI progress display) and vibedj-cq0.4 (remove tqdm dependency).","created_at":"2026-02-07T02:29:15Z"}]}
{"id":"vibedj-cq0.3","title":"Update UI to display granular indexing progress","description":"Update MusicTab.tsx to render processed/total counts from the progress data (status.progress.processed, status.progress.total) in addition to the existing message. Update the getProgressMessage() function to format richer progress info. Add/update UI tests in MusicTab or related test files to verify progress display with mock status data containing processed/total fields.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:31.412898-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:47:43.805635-05:00","closed_at":"2026-02-06T21:47:43.805635-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.3","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:31.414743-05:00","created_by":"Nick Seward"}],"comments":[{"id":3,"issue_id":"vibedj-cq0.3","author":"Nick Seward","text":"Depends on vibedj-cq0.2 being completed first (needs the backend to actually send progress data). Key files: ui/src/components/MusicTab.tsx (getProgressMessage function around line 96, and the progress indicator JSX around line 213). The backend will send progress as: {phase: string, processed: number, total: number, message: string}. The message field will already contain a human-readable string like 'Analyzing audio (42/200)' so the simplest approach is to just display status.progress.message. The types file ui/src/types.ts or similar may need updating if JobStatusResponse progress is typed. UI tests: check ui/src/components/ for existing MusicTab tests or add new ones.","created_at":"2026-02-07T01:20:38Z"},{"id":7,"issue_id":"vibedj-cq0.3","author":"Nick Seward","text":"Session hand-off [2026-02-06]: Completed. Added processed/total fields to JobStatusResponse type. Replaced static phase label in MusicTab.tsx with animated progress bar (motion.div) showing processed/total count and percentage. Bar only renders when processed/total are available; scanning phase shows message only. Created MusicTab.test.tsx with 9 tests covering progress display, error display, and button states. All 189 Python + 56 UI tests pass. Commit 6cfc621 pushed. Last remaining bead: vibedj-cq0.4 (remove tqdm dependency).","created_at":"2026-02-07T02:47:51Z"}]}
{"id":"vibedj-cq0.4","title":"Remove tqdm from project dependencies","description":"Remove tqdm from pyproject.toml dependencies. Run tests to confirm nothing else depends on it. This should be done after vibedj-cq0.1 removes the tqdm usage from indexer.py.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:36.596367-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:50:44.06039-05:00","closed_at":"2026-02-06T21:50:44.06039-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.4","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:36.598562-05:00","created_by":"Nick Seward"}],"comments":[{"id":4,"issue_id":"vibedj-cq0.4","author":"Nick Seward","text":"Depends on vibedj-cq0.1. After tqdm usage is removed from indexer.py, remove tqdm from pyproject.toml (check [project.dependencies] or [tool.uv] sections). Run 'uv sync' and 'uv run pytest -v' to confirm nothing breaks. Also grep the entire codebase for any remaining tqdm imports before removing.","created_at":"2026-02-07T01:20:39Z"}]}
{"id":"vibedj-gjo","title":"Song Selection Highlighting","description":"When a user selects a song in the search results, the song should be highlighted in the search results. Right now there is no highlighting of the selected song making it hard to see which song is selected. Currently, a \"+\" turns into a checkmark near the result item, but this is insufficient visual feedback.","design":"- When a song is selected, the song row should be highlighted in the search results.\n- Multi-select is already supported; each selected song should be highlighted.\n- The colour of the highlight should be a light colour that matches the theme of the application. A light purple and pink mix would be a good choice.\n- Songs should remain highlighted during and after playlist generation.\n- Highlights are cleared via the existing reset button or by starting a new search.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-04T21:03:44.356556-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T19:57:52.151752-05:00","closed_at":"2026-02-05T19:07:59.173187-05:00"}
