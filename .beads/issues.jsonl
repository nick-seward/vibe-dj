{"id":"vibedj-042","title":"Music library stats on config screen","description":"Add a stats section to the Music tab in the config screen showing library statistics for an already-indexed music library. Layout: indexing-related stats (indexing completeness, last indexed) at the top, followed by library stats (song count, artist count, album count, total play time). Requires a new backend endpoint and a frontend stats component in MusicTab. Only show stats when a library has been indexed (i.e., songs exist in the database).","status":"closed","priority":2,"issue_type":"feature","owner":"nick@homeslice.ca","created_at":"2026-02-12T21:17:14.810508-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T21:46:30.785827-05:00","closed_at":"2026-02-12T21:46:30.785827-05:00","close_reason":"All subtasks completed: backend endpoint (vibedj-042.1) and frontend display (vibedj-042.2) for music library stats on config screen"}
{"id":"vibedj-042.1","title":"Add GET /api/library/stats endpoint for music library statistics","description":"Add a new API endpoint that returns library statistics by querying the database. Stats to return: total songs, distinct artist count, distinct album count, total play time (sum of duration), songs with features vs total (indexing completeness), and last indexed timestamp. Extend MusicDatabase with a get_library_stats() method using SQLAlchemy aggregate queries (COUNT, COUNT DISTINCT, SUM). Return as a Pydantic response model (LibraryStatsResponse). Key files: src/vibe_dj/core/database.py, src/vibe_dj/api/routes/ (new or existing route file), src/vibe_dj/api/models.py.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-12T21:17:22.608775-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T21:42:30.448681-05:00","closed_at":"2026-02-12T21:42:30.448681-05:00","close_reason":"Implemented GET /api/library/stats endpoint with MusicDatabase.get_library_stats(), LibraryStatsResponse model, and full test coverage","dependencies":[{"issue_id":"vibedj-042.1","depends_on_id":"vibedj-042","type":"parent-child","created_at":"2026-02-12T21:17:22.610315-05:00","created_by":"Nick Seward"}],"comments":[{"id":1,"issue_id":"vibedj-042.1","author":"Nick Seward","text":"Session hand-off [2026-02-12]: Completed backend endpoint. Added MusicDatabase.get_library_stats() with SQLAlchemy aggregate queries (COUNT, COUNT DISTINCT, SUM, MAX). Created LibraryStatsResponse Pydantic model and GET /api/library/stats route in new library.py route file. 6 tests added (3 database, 3 API). All 203 Python + 61 UI tests passing. See commit 62e0f25. Next: vibedj-042.2 (frontend stats display) is now unblocked.","created_at":"2026-02-13T02:42:47Z"}]}
{"id":"vibedj-042.2","title":"Frontend: display library stats on Music tab in config screen","description":"Add a stats display section to the MusicTab component. Fetch stats from GET /api/library/stats on mount. Layout: top section shows indexing completeness (e.g., '450/500 songs analyzed' with a progress indicator) and last indexed timestamp. Below that, show library stats: total songs, distinct artists, distinct albums, and total play time (formatted as hours/minutes). Only render the stats section when the library has been indexed (total_songs \u003e 0). Create a useLibraryStats hook for fetching. Key files: ui/src/components/MusicTab.tsx, ui/src/hooks/ (new hook), ui/src/types/index.ts.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-12T21:17:29.960668-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T21:46:27.090451-05:00","closed_at":"2026-02-12T21:46:27.090451-05:00","close_reason":"Implemented frontend library stats display with useLibraryStats hook, LibraryStats type, and MusicTab stats section with indexing completeness bar and 2x2 stats grid","dependencies":[{"issue_id":"vibedj-042.2","depends_on_id":"vibedj-042","type":"parent-child","created_at":"2026-02-12T21:17:29.962032-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-042.2","depends_on_id":"vibedj-042.1","type":"blocks","created_at":"2026-02-12T21:17:33.884513-05:00","created_by":"Nick Seward"}],"comments":[{"id":2,"issue_id":"vibedj-042.2","author":"Nick Seward","text":"Session hand-off [2026-02-12]: Completed frontend stats display. Created useLibraryStats hook (fetches /api/library/stats on mount), added LibraryStats type, and updated MusicTab with stats section: indexing completeness progress bar, last indexed timestamp, and 2x2 grid (songs, artists, albums, play time). Added formatDuration helper. 8 new tests (4 hook, 4 component). All 69 UI tests + 203 Python tests passing. See commit d9df521.","created_at":"2026-02-13T02:46:48Z"}]}
{"id":"vibedj-2k3","title":"Epic: Web playlist controls + CLI retirement","description":"Deliver web parity for playlist generation controls (custom playlist length and BPM jitter defaults) and remove the legacy CLI/runtime/docs references now that web app is the primary interface.","status":"closed","priority":2,"issue_type":"epic","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:00.035685-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T21:15:46.611342-05:00","closed_at":"2026-02-13T21:15:46.611342-05:00","close_reason":"All 9 child tasks completed: playlist config model+API defaults, frontend types/constants, PlaylistTab settings UI, playlist size selector in generator, BPM jitter wiring, CLI removal, Dockerfile+docs cleanup, and comprehensive test coverage. Epic fully delivered.","dependencies":[{"issue_id":"vibedj-2k3","depends_on_id":"vibedj-8on","type":"blocks","created_at":"2026-02-13T18:59:59.387575-05:00","created_by":"Nick Seward"}],"comments":[{"id":3,"issue_id":"vibedj-2k3","author":"Nick Seward","text":"Execution order is dependency-driven and intentionally blocked by existing open epic vibedj-8on to align queue ordering. Bead 8 is confirmed as: repurpose root Dockerfile to run API server (not deletion). Implementation pointers: config model in src/vibe_dj/models/config.py, config API in src/vibe_dj/api/routes/config.py, UI settings in ui/src/components/ConfigScreen.tsx + new PlaylistTab.tsx, generation wiring in ui/src/App.tsx and ui/src/hooks/useApi.ts, CLI removal in src/vibe_dj/main.py + src/vibe_dj/__init__.py + pyproject.toml. Verify with make test \u0026\u0026 cd ui \u0026\u0026 npm run test:run and smoke run make run.","created_at":"2026-02-14T00:00:29Z"}]}
{"id":"vibedj-2k3.1","title":"Add playlist default fields to backend config model","description":"Add default_playlist_size and default_bpm_jitter to Config dataclass with defaults (20, 5.0), include validation, and update config.example.json.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:08.358589-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:26:55.192999-05:00","closed_at":"2026-02-13T20:26:55.192999-05:00","close_reason":"Added default_playlist_size and default_bpm_jitter to Config dataclass with validation constants and 9 new tests. All quality gates pass (216 Python, 69 UI).","dependencies":[{"issue_id":"vibedj-2k3.1","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:08.360353-05:00","created_by":"Nick Seward"}],"comments":[{"id":4,"issue_id":"vibedj-2k3.1","author":"Nick Seward","text":"Session hand-off 2026-02-13: Added default_playlist_size (int, default 20) and default_bpm_jitter (float, default 5.0) to Config dataclass. Added ALLOWED_PLAYLIST_SIZES and BPM_JITTER_MIN/MAX constants. Validation in __post_init__: size must be in [15,20,25,30,35,40], jitter in [1.0,20.0]. Updated config.example.json. Added 9 tests covering defaults, valid/invalid values, boundaries, save/load round-trip, and from_dict. Removed unused Path import. Quality gates: 216 Python tests, 69 UI tests, ruff clean. Commit: ab65d69.","created_at":"2026-02-14T01:27:02Z"}]}
{"id":"vibedj-2k3.2","title":"Expose playlist defaults in config API (GET/PUT)","description":"Extend /api/config response and update payload handling to include default_playlist_size and default_bpm_jitter. Add server-side validation for allowed sizes [15,20,25,30,35,40] and jitter range 1..20.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:13.764794-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:31:41.739373-05:00","closed_at":"2026-02-13T20:31:41.739373-05:00","close_reason":"Implemented: added default_playlist_size and default_bpm_jitter to ConfigResponse and UpdateConfigRequest, with server-side validation using shared constants. 12 new tests added.","dependencies":[{"issue_id":"vibedj-2k3.2","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:13.766287-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.2","depends_on_id":"vibedj-2k3.1","type":"blocks","created_at":"2026-02-13T18:59:59.501131-05:00","created_by":"Nick Seward"}],"comments":[{"id":5,"issue_id":"vibedj-2k3.2","author":"Nick Seward","text":"Session 2026-02-13: Exposed default_playlist_size and default_bpm_jitter in GET/PUT /api/config. Validation uses ALLOWED_PLAYLIST_SIZES and BPM_JITTER_MIN/MAX from models.config (single source of truth). 12 new tests cover valid/invalid/boundary cases and partial update preservation. All 227 Python + 69 UI tests pass.","created_at":"2026-02-14T01:31:47Z"}]}
{"id":"vibedj-2k3.3","title":"Update frontend config types/constants for playlist defaults","description":"Add frontend type fields and shared constants for playlist size options/defaults so settings and generation flows use one source of truth.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:17.884764-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:35:29.738842-05:00","closed_at":"2026-02-13T20:35:29.738842-05:00","close_reason":"Added PLAYLIST_SIZE_OPTIONS, PlaylistSize type, DEFAULT_PLAYLIST_SIZE, BPM_JITTER_MIN/MAX/DEFAULT constants, and updated ConfigResponse + UpdateConfigRequest interfaces with playlist default fields.","dependencies":[{"issue_id":"vibedj-2k3.3","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:17.886256-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.3","depends_on_id":"vibedj-2k3.2","type":"blocks","created_at":"2026-02-13T18:59:59.609061-05:00","created_by":"Nick Seward"}],"comments":[{"id":6,"issue_id":"vibedj-2k3.3","author":"Nick Seward","text":"Session 2026-02-13: Added shared constants (PLAYLIST_SIZE_OPTIONS, PlaylistSize, DEFAULT_PLAYLIST_SIZE, BPM_JITTER_MIN/MAX/DEFAULT) and updated ConfigResponse + UpdateConfigRequest interfaces in ui/src/types/index.ts. Constants mirror backend values for single source of truth. All 227 Python + 69 UI tests pass.","created_at":"2026-02-14T01:35:36Z"}]}
{"id":"vibedj-2k3.4","title":"Add Playlist settings tab (BPM slider + default size dropdown)","description":"Add a new Playlist tab in settings with BPM jitter slider (1..20), visual oscillation indicator, and default playlist size dropdown (15,20,25,30,35,40) with save behavior consistent with existing tabs.","status":"closed","priority":2,"issue_type":"feature","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:23.455428-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:39:18.646142-05:00","closed_at":"2026-02-13T20:39:18.646142-05:00","close_reason":"Created PlaylistTab component with BPM jitter slider (visual oscillation indicator), default playlist size dropdown, and Save button. Integrated into ConfigScreen as new Playlist tab. 3 new UI tests added.","dependencies":[{"issue_id":"vibedj-2k3.4","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:23.45718-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.4","depends_on_id":"vibedj-2k3.3","type":"blocks","created_at":"2026-02-13T18:59:59.716884-05:00","created_by":"Nick Seward"}],"comments":[{"id":7,"issue_id":"vibedj-2k3.4","author":"Nick Seward","text":"Session 2026-02-13: Created PlaylistTab.tsx with BPM jitter slider (range 1-20, step 0.5, animated oscillation indicator), default playlist size dropdown (PLAYLIST_SIZE_OPTIONS), and Save button following MusicTab/SubSonicTab pattern. Wired into ConfigScreen.tsx as new 'playlist' tab with local state + change detection. Added 3 tests to ConfigScreen.test.tsx. All 227 Python + 72 UI tests pass.","created_at":"2026-02-14T01:39:25Z"}]}
{"id":"vibedj-2k3.5","title":"Add playlist size selector to generator flow","description":"Add playlist length dropdown (15,20,25,30,35,40; default 20) in the generate playlist UI and use configured default as initial value.","status":"closed","priority":2,"issue_type":"feature","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:29.003428-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:53:47.348773-05:00","closed_at":"2026-02-13T20:53:47.348773-05:00","close_reason":"Completed","dependencies":[{"issue_id":"vibedj-2k3.5","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:29.00586-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.5","depends_on_id":"vibedj-2k3.3","type":"blocks","created_at":"2026-02-13T18:59:59.820559-05:00","created_by":"Nick Seward"}],"comments":[{"id":8,"issue_id":"vibedj-2k3.5","author":"Nick Seward","text":"Implemented UI playlist size selector in search results generate flow, wired App to initialize selected size from config default (with override support), and passed selected length into generate/regenerate calls. Added SearchResults tests for selector rendering, change handling, and generate payload length argument. Validation: npm run test:run (75 passing), targeted eslint on changed files passes; make test currently fails in pre-existing config default assertion (expected 20, got 35).","created_at":"2026-02-14T01:48:58Z"},{"id":9,"issue_id":"vibedj-2k3.5","author":"Nick Seward","text":"Addressed failing make test gate: updated tests/unit/api/test_config_routes.py to override get_config with Config() in test_get_config_playlist_defaults_have_correct_defaults so it validates model defaults deterministically and does not depend on local config.json state. Re-ran make test: 227 passed.","created_at":"2026-02-14T01:51:35Z"},{"id":10,"issue_id":"vibedj-2k3.5","author":"Nick Seward","text":"Session hand-off 2026-02-13: Completed playlist-size selector in generate flow. UI now exposes playlist size dropdown (15/20/25/30/35/40) in search results, initializes from config default when no manual override, and sends selected length for generate/regenerate requests. Added SearchResults unit tests for selector rendering/change and generate callback length. Fixed test determinism in tests/unit/api/test_config_routes.py by overriding get_config with Config() for defaults assertion to avoid local config.json leakage. Validation: npm run test:run and make test both passing.","created_at":"2026-02-14T01:53:35Z"}]}
{"id":"vibedj-2k3.6","title":"Use configured BPM jitter in playlist generation payload","description":"Replace hardcoded bpm_jitter in UI generate request with settings-configured default. Update hook signatures to accept explicit generation parameters.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:34.557335-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:59:33.258491-05:00","closed_at":"2026-02-13T20:59:33.258491-05:00","close_reason":"Completed: replaced hardcoded bpm_jitter with config-derived value in UI generate/regenerate calls","dependencies":[{"issue_id":"vibedj-2k3.6","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:34.55899-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.6","depends_on_id":"vibedj-2k3.3","type":"blocks","created_at":"2026-02-13T18:59:59.92644-05:00","created_by":"Nick Seward"}],"comments":[{"id":11,"issue_id":"vibedj-2k3.6","author":"Nick Seward","text":"Session 2026-02-13: Replaced hardcoded bpm_jitter: 5.0 in useApi.ts generate callback with a bpmJitter parameter. App.tsx now derives configuredBpmJitter from config (with range validation and DEFAULT_BPM_JITTER fallback), passing it to both handleGeneratePlaylist and handleRegenerate. All tests pass (75 UI, 227 Python). Commit 1722922.","created_at":"2026-02-14T01:59:38Z"}]}
{"id":"vibedj-2k3.7","title":"Remove CLI module and script entrypoint wiring","description":"Remove src/vibe_dj/main.py Click CLI code and packaging entrypoint wiring (vibe_dj:main). Ensure package init no longer imports CLI and API startup remains intact.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:39.86122-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T21:02:36.096264-05:00","closed_at":"2026-02-13T21:02:36.096264-05:00","close_reason":"Completed: removed main.py CLI, __init__.py wiring, [project.scripts], and click dependency","dependencies":[{"issue_id":"vibedj-2k3.7","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:39.86301-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.7","depends_on_id":"vibedj-2k3.6","type":"blocks","created_at":"2026-02-13T19:00:00.034853-05:00","created_by":"Nick Seward"}],"comments":[{"id":12,"issue_id":"vibedj-2k3.7","author":"Nick Seward","text":"Session 2026-02-13: Deleted src/vibe_dj/main.py (189-line Click CLI with index/playlist commands). Cleaned __init__.py (removed cli import and main() wrapper). Removed [project.scripts] section and click\u003e=8.3.1 from pyproject.toml dependencies. Regenerated uv.lock. No CLI-related tests existed. All tests pass (227 Python, 75 UI). Commit d9cfd04.","created_at":"2026-02-14T02:02:42Z"}]}
{"id":"vibedj-2k3.8","title":"Repurpose root Dockerfile and docs away from CLI usage","description":"Repurpose root Dockerfile to run API server (not vibe-dj CLI) and clean CLI references in README/docs/runtime instructions.","status":"closed","priority":2,"issue_type":"chore","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:43.675521-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T21:07:59.517683-05:00","closed_at":"2026-02-13T21:07:59.517683-05:00","close_reason":"Completed: repurposed Dockerfile to full multi-stage API+UI build, cleaned CLI references from README","dependencies":[{"issue_id":"vibedj-2k3.8","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:43.677191-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.8","depends_on_id":"vibedj-2k3.7","type":"blocks","created_at":"2026-02-13T19:00:00.148525-05:00","created_by":"Nick Seward"}],"comments":[{"id":13,"issue_id":"vibedj-2k3.8","author":"Nick Seward","text":"Session 2026-02-13: Repurposed root Dockerfile from CLI entrypoint to full multi-stage API+UI build (user upgraded it to match Dockerfile-Server pattern with Node build stage). Rewrote README How It Works section from CLI flags to web app workflow. Simplified Docker section in README. All tests pass (227 Python, 75 UI).","created_at":"2026-02-14T02:08:06Z"}]}
{"id":"vibedj-2k3.9","title":"Add/update tests for playlist defaults and CLI retirement","description":"Add backend/frontend tests for new playlist config defaults + UI controls, and remove/update any CLI-related tests or assumptions so full test suite stays green.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T18:59:49.058109-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T21:14:43.677255-05:00","closed_at":"2026-02-13T21:14:43.677255-05:00","close_reason":"Added 38 new frontend tests: PlaylistTab.test.tsx (20 tests) and PlaylistView.test.tsx (18 tests). Backend tests already comprehensive. No CLI test references to clean up. Full suite green: 227 Python + 113 UI tests.","dependencies":[{"issue_id":"vibedj-2k3.9","depends_on_id":"vibedj-2k3","type":"parent-child","created_at":"2026-02-13T18:59:49.059697-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.9","depends_on_id":"vibedj-2k3.4","type":"blocks","created_at":"2026-02-13T19:00:00.254446-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.9","depends_on_id":"vibedj-2k3.5","type":"blocks","created_at":"2026-02-13T19:00:00.35885-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.9","depends_on_id":"vibedj-2k3.6","type":"blocks","created_at":"2026-02-13T19:00:00.464128-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.9","depends_on_id":"vibedj-2k3.7","type":"blocks","created_at":"2026-02-13T19:00:00.570901-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2k3.9","depends_on_id":"vibedj-2k3.8","type":"blocks","created_at":"2026-02-13T19:00:00.680713-05:00","created_by":"Nick Seward"}],"comments":[{"id":14,"issue_id":"vibedj-2k3.9","author":"Nick Seward","text":"Session hand-off [2026-02-13]: Completed. Added PlaylistTab.test.tsx (20 tests: rendering, interactions, save behavior, BPM preview text) and PlaylistView.test.tsx (18 tests: rendering, interactions, sync modal flow). Backend tests were already comprehensive from prior beads. No CLI test references existed to clean up. Full suite: 227 Python + 113 UI tests passing. Commit ad5b071 pushed to origin/master.","created_at":"2026-02-14T02:15:24Z"}]}
{"id":"vibedj-2w3","title":"Indexing progress lost when user navigates away from config screen","description":"When a user starts indexing their music library from Config \u003e Music tab, the indexing status (progress bar, spinner, messages) is stored in component-local useState inside useIndexing hook. If the user closes the config screen or navigates away, ConfigScreen unmounts, polling stops, and all state is lost. When they return, they see a blank idle screen with no indication that indexing is still running on the backend. The backend job continues fine — the problem is purely frontend state loss. Fix: Add a backend 'active job' endpoint (GET /api/index/active) so the frontend can check for in-progress jobs on mount and resume polling. Key files: ui/src/hooks/useIndexing.ts, ui/src/components/MusicTab.tsx, src/vibe_dj/api/","status":"closed","priority":2,"issue_type":"bug","owner":"nick@homeslice.ca","created_at":"2026-02-12T21:06:53.224883-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T21:35:33.247078-05:00","closed_at":"2026-02-12T21:35:33.247078-05:00","close_reason":"Both subtasks complete: backend GET /api/index/active endpoint (2w3.1) and frontend active job detection on mount (2w3.2). Indexing progress now persists across navigation."}
{"id":"vibedj-2w3.1","title":"Add GET /api/index/active endpoint to return currently running indexing job","description":"Add a new API endpoint GET /api/index/active that checks for any currently running or queued indexing job and returns its status. If no job is active, return a response indicating that (e.g., null job_id or 404). This endpoint will be called by the frontend on mount to detect and reconnect to in-progress indexing jobs. Should return the same JobStatusResponse shape used by GET /api/status/{job_id}. Key files: src/vibe_dj/api/ (index routes), and wherever the background job state is managed.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-12T21:07:29.766598-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T21:30:14.872052-05:00","closed_at":"2026-02-12T21:30:14.872052-05:00","close_reason":"Added get_active_job() to JobManager and GET /api/index/active endpoint. Returns active job status or idle response. 8 new tests, all 197+56 pass.","dependencies":[{"issue_id":"vibedj-2w3.1","depends_on_id":"vibedj-2w3","type":"parent-child","created_at":"2026-02-12T21:07:29.773471-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-2w3.2","title":"Frontend: check for active indexing job on mount and resume polling","description":"Update useIndexing hook to check GET /api/index/active on mount. If an active job is found, set the jobId and isIndexing state and start polling for status updates. This ensures that when the user navigates away from the config screen and comes back (or refreshes the browser), the progress bar and status messages reappear automatically. Key files: ui/src/hooks/useIndexing.ts, ui/src/components/MusicTab.tsx.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-12T21:07:36.138077-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T21:35:27.994735-05:00","closed_at":"2026-02-12T21:35:27.994735-05:00","close_reason":"Frontend useIndexing hook checks GET /api/index/active on mount, resumes polling if active job found. 5 new hook tests, all 197+61 pass.","dependencies":[{"issue_id":"vibedj-2w3.2","depends_on_id":"vibedj-2w3","type":"parent-child","created_at":"2026-02-12T21:07:36.139436-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-2w3.2","depends_on_id":"vibedj-2w3.1","type":"blocks","created_at":"2026-02-12T21:07:45.42655-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-35o","title":"Remove credential override section from SubSonic sync modal","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-12T20:40:06.112821-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T20:51:01.635727-05:00","closed_at":"2026-02-12T20:51:01.635727-05:00","close_reason":"Removed credential override section from SubSonic sync modal. Cleaned up PlaylistView.tsx, App.tsx, and useApi.ts.","comments":[{"id":15,"issue_id":"vibedj-35o","author":"Nick Seward","text":"Remove collapsible 'Override server credentials' section from PlaylistView.tsx sync modal (URL/username/password fields, lines 216-276). Remove state: showCredentials, navidromeUrl, navidromeUsername, navidromePassword. Remove credential-building logic in handleSync. Remove NavidromeCredentials interface. Simplify onSyncToNavidrome prop to drop credentials param. Update App.tsx handleSyncToNavidrome and useApi.ts useSyncToNavidrome to stop passing credentials. Run existing tests to verify.","created_at":"2026-02-13T01:40:22Z"}]}
{"id":"vibedj-3dg","title":"Epic: Reorganize test files for better structure and maintainability","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:45:52.521685-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T20:19:06.737776-05:00","closed_at":"2026-02-07T20:19:06.737776-05:00","close_reason":"Closed","comments":[{"id":16,"issue_id":"vibedj-3dg","author":"Nick Seward","text":"Analysis: tests/test_api.py (949 lines) sits at root of tests/ instead of tests/unit/api/. Contains 7 test classes covering 5 different API concerns. UI test files are co-located with source in ui/src/components/ and ui/src/context/ instead of using the existing ui/src/test/ directory. Plan: Split test_api.py into 5 focused files under tests/unit/api/, move all UI .test.tsx files under ui/src/test/ mirroring source structure, update vitest config if needed.","created_at":"2026-02-07T18:45:59Z"},{"id":17,"issue_id":"vibedj-3dg","author":"Nick Seward","text":"Dependency ordering for all work: (1) unittest→pytest conversions (vibedj-3dg.11-14) should be done FIRST since they touch files in-place without moving them. (2) Then create conftest.py (vibedj-3dg.6). (3) Then split test_api.py into separate files (vibedj-3dg.1-5). (4) Delete test_api.py (vibedj-3dg.7). (5) Move UI tests (vibedj-3dg.8-9). (6) Final verification (vibedj-3dg.10). Rationale: doing conversions first avoids having to convert AND move files simultaneously, reducing merge conflict risk.","created_at":"2026-02-07T18:53:37Z"},{"id":18,"issue_id":"vibedj-3dg","author":"Nick Seward","text":"Session 2026-02-07: Completed all remaining work on this epic. Moved 4 component test files from ui/src/components/ to ui/src/test/components/ (vibedj-3dg.8) and 1 context test file from ui/src/context/ to ui/src/test/context/ (vibedj-3dg.9). Updated relative imports to use @/ alias in each file. Final verification (vibedj-3dg.10): 189 Python tests + 56 UI tests all pass. Commit: 1231e6d. Epic fully complete — all 14 child beads closed.","created_at":"2026-02-08T01:19:54Z"}]}
{"id":"vibedj-3dg.1","title":"Split test_api.py: Extract TestRootEndpoints into tests/unit/api/test_root_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:03.882257-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:45.608548-05:00","closed_at":"2026-02-07T19:21:45.608548-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.1","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:03.884106-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.1","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:06.134842-05:00","created_by":"Nick Seward"}],"comments":[{"id":19,"issue_id":"vibedj-3dg.1","author":"Nick Seward","text":"Extract TestRootEndpoints class (lines 100-126 of test_api.py) into tests/unit/api/test_root_routes.py. This class tests the root endpoint (/) and health check endpoint (/health). Will need the shared fixtures (test_config, client) — consider creating a conftest.py in tests/unit/api/ for shared fixtures.","created_at":"2026-02-07T18:46:10Z"},{"id":20,"issue_id":"vibedj-3dg.1","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:54:59Z"}]}
{"id":"vibedj-3dg.10","title":"Final verification: Run all Python and UI tests after reorganization","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:45.985436-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T20:19:03.64909-05:00","closed_at":"2026-02-07T20:19:03.64909-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:45.987705-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg.7","type":"blocks","created_at":"2026-02-07T13:58:23.593301-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg.8","type":"blocks","created_at":"2026-02-07T13:58:24.355641-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.10","depends_on_id":"vibedj-3dg.9","type":"blocks","created_at":"2026-02-07T13:58:25.472232-05:00","created_by":"Nick Seward"}],"comments":[{"id":21,"issue_id":"vibedj-3dg.10","author":"Nick Seward","text":"Final step after all reorganization is complete. Run: 'make test \u0026\u0026 cd ui \u0026\u0026 npm run test:run'. Verify same number of tests pass as before reorganization. Check that no test files remain in their old locations. Verify no duplicate test coverage.","created_at":"2026-02-07T18:47:51Z"},{"id":22,"issue_id":"vibedj-3dg.10","author":"Nick Seward","text":"DEPENDENCY: Do this LAST, after ALL other sibling beads (vibedj-3dg.1-9, .11-14) are complete. This is the final verification step.","created_at":"2026-02-07T18:55:10Z"}]}
{"id":"vibedj-3dg.11","title":"Convert tests/unit/core/ from unittest to pytest style (4 files)","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:52:46.344417-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T18:52:26.196349-05:00","closed_at":"2026-02-07T18:52:26.196363-05:00","dependencies":[{"issue_id":"vibedj-3dg.11","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:52:46.346008-05:00","created_by":"Nick Seward"}],"comments":[{"id":23,"issue_id":"vibedj-3dg.11","author":"Nick Seward","text":"Convert 4 files from unittest.TestCase to pytest style: test_analyzer.py (144 lines, 8 tests), test_database.py (396 lines, 18 tests), test_indexer.py (328 lines, 14 tests), test_similarity.py (129 lines, 11 tests). Conversion pattern: remove unittest.TestCase inheritance, convert setUp/tearDown to pytest fixtures (use @pytest.fixture(autouse=True) or conftest.py), replace self.assertEqual→assert ==, self.assertTrue→assert, self.assertIsNone→assert is None, self.assertRaises→pytest.raises, etc. Remove if __name__==__main__ blocks. test_database.py and test_similarity.py have tearDown methods that need yield-based fixtures for cleanup.","created_at":"2026-02-07T18:52:54Z"},{"id":24,"issue_id":"vibedj-3dg.11","author":"Nick Seward","text":"Session 2026-02-07: Converted all 4 files (test_analyzer.py, test_database.py, test_indexer.py, test_similarity.py) from unittest.TestCase to idiomatic pytest. Pattern: removed class wrappers, setUp/tearDown → pytest fixtures (yield-based where cleanup needed), self.assertX → plain assert, self.assertRaises → pytest.raises. All 189 Python tests + 56 UI tests pass. Committed as c42722d and pushed.","created_at":"2026-02-07T23:52:32Z"}]}
{"id":"vibedj-3dg.12","title":"Convert tests/unit/models/ from unittest to pytest style (4 files)","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:52:58.507452-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T18:59:15.082989-05:00","closed_at":"2026-02-07T18:59:15.082989-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.12","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:52:58.51062-05:00","created_by":"Nick Seward"}],"comments":[{"id":25,"issue_id":"vibedj-3dg.12","author":"Nick Seward","text":"Convert 4 files from unittest.TestCase to pytest style: test_config.py (102 lines, 7 tests), test_features.py (48 lines, 4 tests), test_playlist.py (92 lines, 7 tests), test_song.py (58 lines, 3 tests). These are simple model tests. test_config.py and test_playlist.py have setUp methods. test_config.py uses self.assertRaises for ValueError checks — convert to pytest.raises. All use self.assert* patterns. No tearDown needed.","created_at":"2026-02-07T18:53:05Z"},{"id":26,"issue_id":"vibedj-3dg.12","author":"Nick Seward","text":"Session 2026-02-07: Converted all 4 files (test_config.py, test_features.py, test_playlist.py, test_song.py) from unittest.TestCase to idiomatic pytest. Pattern: removed class wrappers, setUp → @pytest.fixture() returning tuple, self.assertX → plain assert, self.assertRaises → pytest.raises(match=...). All 189 Python tests + 56 UI tests pass. Committed as 69d75c7 and pushed.","created_at":"2026-02-07T23:59:20Z"}]}
{"id":"vibedj-3dg.13","title":"Convert tests/unit/services/ unittest files to pytest style (2 files)","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:53:12.010229-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:07:23.854729-05:00","closed_at":"2026-02-07T19:07:23.854729-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.13","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:53:12.011966-05:00","created_by":"Nick Seward"}],"comments":[{"id":27,"issue_id":"vibedj-3dg.13","author":"Nick Seward","text":"Convert 2 files from unittest.TestCase to pytest style: test_playlist_exporter.py (160 lines, 7 tests), test_playlist_generator.py (342 lines, 12 tests). Note: test_navidrome_client.py and test_navidrome_sync_service.py already use pytest style — no changes needed. Both files have setUp methods to convert to fixtures. test_playlist_exporter.py uses self.assertRaises for ValueError. test_playlist_generator.py uses self.assertRaises and np.testing assertions (keep np.testing as-is, only convert unittest patterns).","created_at":"2026-02-07T18:53:18Z"},{"id":28,"issue_id":"vibedj-3dg.13","author":"Nick Seward","text":"Session 2026-02-07: Converted both files (test_playlist_exporter.py, test_playlist_generator.py) from unittest.TestCase to idiomatic pytest. Pattern: removed class wrappers, setUp → @pytest.fixture() returning tuples, self.assertX → plain assert, self.assertRaises → pytest.raises. Kept np.testing and unittest.mock. All 189 Python tests + 56 UI tests pass. Committed as 5ff6714 and pushed.","created_at":"2026-02-08T00:07:30Z"}]}
{"id":"vibedj-3dg.14","title":"Convert tests/integration/test_resumable_indexing.py from unittest to pytest style","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:53:23.348183-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:10:51.345764-05:00","closed_at":"2026-02-07T19:10:51.345764-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.14","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:53:23.350204-05:00","created_by":"Nick Seward"}],"comments":[{"id":29,"issue_id":"vibedj-3dg.14","author":"Nick Seward","text":"Convert test_resumable_indexing.py (141 lines, 3 tests) from unittest.TestCase to pytest. Has setUp (creates temp dirs, config, audio files) and tearDown (shutil.rmtree cleanup) — convert to a yield-based pytest fixture. Replace self.assertEqual→assert ==. Remove unittest.main() block.","created_at":"2026-02-07T18:53:28Z"},{"id":30,"issue_id":"vibedj-3dg.14","author":"Nick Seward","text":"Session 2026-02-07: Converted test_resumable_indexing.py from unittest.TestCase to idiomatic pytest. setUp+tearDown → yield-based @pytest.fixture() with cleanup after yield, inlined helper, self.assertEqual → assert ==. All 189 Python tests + 56 UI tests pass. Committed as a116038 and pushed. This completes all unittest→pytest conversions (vibedj-3dg.11-14).","created_at":"2026-02-08T00:10:57Z"}]}
{"id":"vibedj-3dg.2","title":"Split test_api.py: Extract TestIndexEndpoints and TestRunIndexingJob into tests/unit/api/test_index_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:16.081761-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:45.758292-05:00","closed_at":"2026-02-07T19:21:45.758292-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.2","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:16.083463-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.2","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:07.163606-05:00","created_by":"Nick Seward"}],"comments":[{"id":31,"issue_id":"vibedj-3dg.2","author":"Nick Seward","text":"Extract TestIndexEndpoints (lines 128-207) and TestRunIndexingJob (lines 210-316) into tests/unit/api/test_index_routes.py. Both classes test indexing-related functionality: TestIndexEndpoints tests the /api/index and /api/status endpoints, TestRunIndexingJob tests the run_indexing_job background function directly. Needs fixtures: test_config, client, mock_job_manager. Shares fixtures with conftest.py.","created_at":"2026-02-07T18:46:21Z"},{"id":32,"issue_id":"vibedj-3dg.2","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:55:00Z"}]}
{"id":"vibedj-3dg.3","title":"Split test_api.py: Extract TestPlaylistEndpoints into tests/unit/api/test_playlist_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:25.383039-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:45.909005-05:00","closed_at":"2026-02-07T19:21:45.909005-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.3","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:25.385624-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.3","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:08.076332-05:00","created_by":"Nick Seward"}],"comments":[{"id":33,"issue_id":"vibedj-3dg.3","author":"Nick Seward","text":"Extract TestPlaylistEndpoints (lines 318-489) into tests/unit/api/test_playlist_routes.py. Tests: generate_playlist_success, generate_playlist_invalid_seeds, generate_playlist_no_results, export_playlist_success, export_playlist_song_not_found. Needs fixtures: test_config, client, test_db. Uses get_playlist_generator, get_playlist_exporter, get_config dependency overrides.","created_at":"2026-02-07T18:46:31Z"},{"id":34,"issue_id":"vibedj-3dg.3","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:55:01Z"}]}
{"id":"vibedj-3dg.4","title":"Split test_api.py: Extract TestSongsEndpoints and TestSearchSongsMultiEndpoint into tests/unit/api/test_songs_routes.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:35.042347-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:46.042943-05:00","closed_at":"2026-02-07T19:21:46.042943-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.4","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:35.044267-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.4","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:09.196931-05:00","created_by":"Nick Seward"}],"comments":[{"id":35,"issue_id":"vibedj-3dg.4","author":"Nick Seward","text":"Extract TestSongsEndpoints (lines 491-693) and TestSearchSongsMultiEndpoint (lines 696-873) into tests/unit/api/test_songs_routes.py. TestSongsEndpoints covers: list_songs_default, list_songs_with_pagination, list_songs_with_search, get_song_by_id_success, get_song_by_id_not_found, get_song_without_features. TestSearchSongsMultiEndpoint covers: default_pagination, custom_pagination, max_limit, max_depth_exceeded, at_max_depth, requires_at_least_one_param, page_size_options. Both use get_db dependency override.","created_at":"2026-02-07T18:46:41Z"},{"id":36,"issue_id":"vibedj-3dg.4","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete. The new file should import shared fixtures from conftest.","created_at":"2026-02-07T18:55:02Z"}]}
{"id":"vibedj-3dg.5","title":"Split test_api.py: Extract TestBackgroundJobManager into tests/unit/api/test_background.py","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:47.274352-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:46.192994-05:00","closed_at":"2026-02-07T19:21:46.192994-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.5","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:47.276835-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.5","depends_on_id":"vibedj-3dg.6","type":"blocks","created_at":"2026-02-07T13:58:10.453281-05:00","created_by":"Nick Seward"}],"comments":[{"id":37,"issue_id":"vibedj-3dg.5","author":"Nick Seward","text":"Extract TestBackgroundJobManager (lines 876-944) into tests/unit/api/test_background.py. This class tests the JobManager directly (not via HTTP endpoints): create_job, start_job, update_progress, complete_job, fail_job, get_nonexistent_job. No shared fixtures needed — it creates its own JobManager instances. Could alternatively go in tests/unit/core/ but since JobManager lives in src/vibe_dj/api/background.py, tests/unit/api/ is the correct location.","created_at":"2026-02-07T18:46:53Z"},{"id":38,"issue_id":"vibedj-3dg.5","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.6 (conftest.py creation) is complete.","created_at":"2026-02-07T18:55:03Z"}]}
{"id":"vibedj-3dg.6","title":"Create shared conftest.py for tests/unit/api/ with common fixtures","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:46:58.703056-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:17:09.826606-05:00","closed_at":"2026-02-07T19:17:09.826606-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:46:58.704875-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.11","type":"blocks","created_at":"2026-02-07T13:57:57.954249-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.12","type":"blocks","created_at":"2026-02-07T13:57:58.879885-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.13","type":"blocks","created_at":"2026-02-07T13:57:59.967714-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.6","depends_on_id":"vibedj-3dg.14","type":"blocks","created_at":"2026-02-07T13:58:01.030054-05:00","created_by":"Nick Seward"}],"comments":[{"id":39,"issue_id":"vibedj-3dg.6","author":"Nick Seward","text":"Create tests/unit/api/conftest.py with shared fixtures extracted from test_api.py: test_config (creates temp DB path, yields Config, cleans up), test_db (creates MusicDatabase with 2 sample songs+features), client (TestClient with dependency override for get_config), mock_job_manager (JobManager instance). This task should be done FIRST before the split tasks, as the new test files will import from conftest. The existing test_config_routes.py has its own client fixture which is fine to keep.","created_at":"2026-02-07T18:47:05Z"},{"id":40,"issue_id":"vibedj-3dg.6","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.11-14 (unittest→pytest conversions) are complete. The conftest.py should be written in pytest style from the start.","created_at":"2026-02-07T18:54:57Z"},{"id":41,"issue_id":"vibedj-3dg.6","author":"Nick Seward","text":"Completed: Created tests/unit/api/conftest.py with 4 shared fixtures (test_config, test_db, client, mock_job_manager) extracted verbatim from tests/test_api.py. All 56 tests pass (24 unit/api + 32 test_api). Ruff clean. Commit 7cb6e77.","created_at":"2026-02-08T00:17:15Z"}]}
{"id":"vibedj-3dg.7","title":"Delete tests/test_api.py after all split tasks are complete","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:10.797384-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T19:21:46.478465-05:00","closed_at":"2026-02-07T19:21:46.478465-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:10.799463-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.1","type":"blocks","created_at":"2026-02-07T13:58:14.901402-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.2","type":"blocks","created_at":"2026-02-07T13:58:15.902685-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.3","type":"blocks","created_at":"2026-02-07T13:58:16.827118-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.4","type":"blocks","created_at":"2026-02-07T13:58:17.864779-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-3dg.7","depends_on_id":"vibedj-3dg.5","type":"blocks","created_at":"2026-02-07T13:58:18.849522-05:00","created_by":"Nick Seward"}],"comments":[{"id":42,"issue_id":"vibedj-3dg.7","author":"Nick Seward","text":"After all split tasks (vibedj-3dg.1 through vibedj-3dg.5) are complete and tests pass, delete the original tests/test_api.py file. Run 'uv run pytest -v' to verify all tests still pass after deletion. This is the final cleanup step for the Python test reorganization.","created_at":"2026-02-07T18:47:16Z"},{"id":43,"issue_id":"vibedj-3dg.7","author":"Nick Seward","text":"DEPENDENCY: Do this AFTER vibedj-3dg.1-5 (all split tasks) are complete. Only delete test_api.py once all tests have been extracted and pass in their new locations.","created_at":"2026-02-07T18:55:08Z"}]}
{"id":"vibedj-3dg.8","title":"Move UI component tests from ui/src/components/ to ui/src/test/components/","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:21.414574-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T20:19:01.919552-05:00","closed_at":"2026-02-07T20:19:01.919552-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.8","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:21.417806-05:00","created_by":"Nick Seward"}],"comments":[{"id":44,"issue_id":"vibedj-3dg.8","author":"Nick Seward","text":"Move 4 test files from ui/src/components/ to ui/src/test/components/: ConfigScreen.test.tsx (229 lines), MusicTab.test.tsx (267 lines), SearchForm.test.tsx (91 lines), SearchResults.test.tsx (226 lines). Create the ui/src/test/components/ directory. Update import paths in each file — they use relative imports like './ConfigScreen' which will need to become '@/components/ConfigScreen'. The vitest config already uses '@' alias pointing to ui/src/. Verify tests still pass with 'npm run test:run'.","created_at":"2026-02-07T18:47:29Z"}]}
{"id":"vibedj-3dg.9","title":"Move UI context tests from ui/src/context/ to ui/src/test/context/","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T13:47:35.3876-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T20:19:02.808291-05:00","closed_at":"2026-02-07T20:19:02.808291-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-3dg.9","depends_on_id":"vibedj-3dg","type":"parent-child","created_at":"2026-02-07T13:47:35.390304-05:00","created_by":"Nick Seward"}],"comments":[{"id":45,"issue_id":"vibedj-3dg.9","author":"Nick Seward","text":"Move ChoiceListContext.test.tsx (117 lines) from ui/src/context/ to ui/src/test/context/. Create the ui/src/test/context/ directory. Update the relative import from './ChoiceListContext' to '@/context/ChoiceListContext'. Verify tests still pass with 'npm run test:run'.","created_at":"2026-02-07T18:47:41Z"}]}
{"id":"vibedj-8on","title":"Security hardening: remove playlist file writes and fix SSRF","description":"Implement security hardening to remove filesystem playlist export/download paths and enforce SSRF protections for outbound SubSonic/Navidrome URLs. Includes backend, frontend contract changes, and associated test updates.","status":"closed","priority":1,"issue_type":"epic","owner":"nick@homeslice.ca","created_at":"2026-02-13T07:30:24.669429-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T20:22:59.979596-05:00","closed_at":"2026-02-13T20:22:59.979596-05:00","close_reason":"All 3 sub-tasks completed: playlist sync refactored to in-memory (8on.1), file export API surface removed (8on.2), SSRF hardening added (8on.3)."}
{"id":"vibedj-8on.1","title":"Refactor playlist sync to SubSonic-only without temp file writes (code + tests)","description":"Refactor playlist sync flow so syncing to SubSonic/Navidrome does not require temporary playlist files on disk. Update route/service interfaces and implementation to operate in-memory only. Include route/service/unit test updates and regressions proving no temp-file write in sync flow.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T07:30:35.61467-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T15:30:36.241477-05:00","closed_at":"2026-02-13T15:30:36.241477-05:00","close_reason":"Completed","dependencies":[{"issue_id":"vibedj-8on.1","depends_on_id":"vibedj-8on","type":"parent-child","created_at":"2026-02-13T07:30:35.620139-05:00","created_by":"Nick Seward"}],"comments":[{"id":46,"issue_id":"vibedj-8on.1","author":"Nick Seward","text":"Implemented in-memory sync refactor: removed output_path from NavidromeSyncService.sync_playlist, updated /api/playlist and /api/playlist/sync to pass playlist+credentials only, updated CLI sync call to preserve output-stem default naming, and refreshed route/service unit tests including regression that sync flow does not use tempfile.NamedTemporaryFile. Validation: make test, npm run test:run, and targeted ruff check all pass.","created_at":"2026-02-13T20:27:03Z"},{"id":47,"issue_id":"vibedj-8on.1","author":"Nick Seward","text":"Session hand-off 2026-02-13: Completed in-memory Navidrome sync refactor for vibedj-8on.1. Key decision: remove output_path from sync service contract and use explicit/default playlist naming to eliminate filesystem dependency in sync paths. Current state: /api/playlist and /api/playlist/sync now call sync with playlist data only; CLI preserves output-stem naming before calling sync. Tests: updated service and API route tests with regression coverage for no tempfile use in sync flow. Validation: make test, npm run test:run, and targeted ruff check passed.","created_at":"2026-02-13T20:30:28Z"}]}
{"id":"vibedj-8on.2","title":"Remove playlist file export/write API surface (backend + UI + tests)","description":"Remove file-writing playlist capabilities from product surface: delete /api/export and /api/playlist/download endpoints, remove output_path-based contracts, and update frontend/types/hooks accordingly so playlists are no longer written to disk for user download. Include all associated backend and UI test updates in this bead.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-13T07:30:35.631941-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T15:54:49.499503-05:00","closed_at":"2026-02-13T15:54:49.499503-05:00","close_reason":"Completed","dependencies":[{"issue_id":"vibedj-8on.2","depends_on_id":"vibedj-8on","type":"parent-child","created_at":"2026-02-13T07:30:35.63362-05:00","created_by":"Nick Seward"}],"comments":[{"id":48,"issue_id":"vibedj-8on.2","author":"Nick Seward","text":"Session hand-off 2026-02-13: Removed API and CLI playlist file-export surfaces. Deleted /api/playlist/download and /api/export endpoints, removed ExportRequest and playlist format contract fields, and removed PlaylistExporter service and related tests. Updated CLI playlist command to in-memory generation + optional Navidrome sync. Updated docs/config examples and backend+UI tests; full Python and UI test suites pass locally. No blockers. Remaining epic work is SSRF hardening in vibedj-8on.3.","created_at":"2026-02-13T20:54:39Z"}]}
{"id":"vibedj-8on.3","title":"SSRF hardening for Navidrome/SubSonic URL inputs (backend + tests)","description":"Add centralized outbound URL validation for Navidrome/SubSonic targets and enforce it in connection-test and sync paths. Block unsafe schemes/hosts (localhost, loopback/private/link-local where appropriate), reject malformed URLs, and add positive/negative tests validating SSRF protections.","status":"closed","priority":1,"issue_type":"bug","owner":"nick@homeslice.ca","created_at":"2026-02-13T07:30:35.865979-05:00","created_by":"Nick Seward","updated_at":"2026-02-13T19:12:56.36609-05:00","closed_at":"2026-02-13T19:12:56.36609-05:00","close_reason":"Completed","dependencies":[{"issue_id":"vibedj-8on.3","depends_on_id":"vibedj-8on","type":"parent-child","created_at":"2026-02-13T07:30:35.867387-05:00","created_by":"Nick Seward"}],"comments":[{"id":49,"issue_id":"vibedj-8on.3","author":"Nick Seward","text":"Session hand-off 2026-02-13: Implemented centralized SSRF protections for outbound Navidrome/Subsonic targets via src/vibe_dj/services/url_security.py. Enforced validation in /api/navidrome/test and NavidromeSyncService sync path. Added regression coverage in tests/unit/services/test_url_security.py, test_config_routes.py, and test_navidrome_sync_service.py. Quality gates: uv run pytest -q (207 passed), targeted ruff checks passed. No blockers; bead ready to close.","created_at":"2026-02-14T00:12:56Z"}]}
{"id":"vibedj-8z4","title":"Search Results Pagination Navigation At Top and Bottom","description":"The search results are paginated but the controls to navigate the pagination are only at the bottom of the page. This is not user friendly as the user has to scroll to the bottom of the page to navigate to the next page of results.","design":"- Add pagination controls to the top of the search results page (in addition to the existing bottom controls).\n- Pagination controls should appear at both top and bottom of search results.\n- The pagination controls should be hidden when there is only one page of results.\n- No sticky behavior needed—controls remain at their fixed top/bottom positions.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-04T21:03:51.360502-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T19:57:52.150461-05:00","closed_at":"2026-02-05T19:19:37.345581-05:00"}
{"id":"vibedj-ac0","title":"SubSonic Connection Test Button Enable Fix","description":"The SubSonic settings have a button that allows the user to test the connection to the SubSonic server. Currently, the \"Test Connection\" button is only enabled if the password field has user-typed content. However, when a password is already stored in settings (displayed as stars), the button remains disabled even though valid credentials exist. This is a bug.","design":"- Keep the current behavior where the password field shows stars if a password is stored in settings.\n- The \"Test Connection\" button should be enabled if:\n  - The password field has user-typed content, OR\n  - A password is already stored in the settings\n- When testing the connection:\n  - Use the newly typed password if the user has entered one (takes precedence)\n  - Otherwise, use the password stored in settings\n- Error and success feedback are already handled by the existing implementation.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-04T21:03:57.965905-05:00","created_by":"Nick Seward","updated_at":"2026-02-04T21:20:41.482146-05:00","closed_at":"2026-02-04T21:20:41.482146-05:00","close_reason":"Closed"}
{"id":"vibedj-cq0","title":"Epic: Replace tqdm with real-time progress reporting for music indexing","description":"Remove tqdm dependency from LibraryIndexer and replace it with a progress callback mechanism that reports real-time indexing progress (phase, processed count, total count) back to the UI via the JobManager polling system. Currently the indexer uses tqdm for CLI progress bars and the UI only sees coarse status messages (scanning/completed). After this work, the UI will show per-file progress like 'Analyzing audio (42/200)' for each indexing phase.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:03.580892-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:50:47.508359-05:00","closed_at":"2026-02-06T21:50:47.508359-05:00","close_reason":"Closed"}
{"id":"vibedj-cq0.1","title":"Add progress callback to LibraryIndexer and remove tqdm","description":"Add an optional progress_callback parameter (Callable[[str, int, int], None] for phase/processed/total) to index_library() and thread it through extract_metadata_phase() and extract_features_phase(). Remove tqdm from both loops and replace with callback invocations. Remove tqdm import. Update all existing Python tests for the indexer to account for the new callback parameter.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:18.629659-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:10:41.824832-05:00","closed_at":"2026-02-06T21:10:41.824832-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.1","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:18.631529-05:00","created_by":"Nick Seward"}],"comments":[{"id":50,"issue_id":"vibedj-cq0.1","author":"Nick Seward","text":"Key files: src/vibe_dj/core/indexer.py (main changes), tests/ directory for indexer tests (check tests/unit/core/). tqdm is used in two places: extract_metadata_phase() line ~106 wraps the file loop, and extract_features_phase() lines ~162-163 wraps the as_completed loop. Both should be replaced with callback invocations. The callback signature Callable[[str, int, int], None] maps to (phase_name, processed_count, total_count). Make the callback optional so CLI/direct usage still works without one. This bead has no sibling dependencies and can be worked first.","created_at":"2026-02-07T01:20:34Z"},{"id":51,"issue_id":"vibedj-cq0.1","author":"Nick Seward","text":"Session hand-off [2026-02-06]: Completed all work. Removed tqdm import from indexer.py, added optional progress_callback parameter (Callable[[str, int, int], None]) to extract_metadata_phase(), extract_features_phase(), and index_library(). Callback receives (phase_name, processed_count, total_count). Added 2 new tests verifying callback invocation. All 187 Python + 47 UI tests pass. Commit 726c57c pushed to origin/master. Next: vibedj-cq0.2 wires the callback into run_indexing_job via JobManager.","created_at":"2026-02-07T02:10:48Z"}]}
{"id":"vibedj-cq0.2","title":"Wire progress callback into run_indexing_job via JobManager","description":"In run_indexing_job (api/routes/index.py), create a progress callback closure that calls job_manager.update_progress() with structured data (phase, processed, total, message). Pass this callback to indexer.index_library(). Update the progress updates to report per-phase granular status instead of just 'Scanning music library...'. Update Python API/route tests to verify progress updates are called during indexing.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:24.701038-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:29:05.28505-05:00","closed_at":"2026-02-06T21:29:05.28505-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.2","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:24.702788-05:00","created_by":"Nick Seward"}],"comments":[{"id":52,"issue_id":"vibedj-cq0.2","author":"Nick Seward","text":"Depends on vibedj-cq0.1 being completed first (needs the callback parameter on index_library). Key files: src/vibe_dj/api/routes/index.py (run_indexing_job function), src/vibe_dj/api/background.py (JobManager.update_progress). Tests: check tests/ for API route tests (likely tests/unit/api/ or tests/test_api.py). The callback closure should call job_manager.update_progress(job_id, dict) where dict contains keys: phase (str), processed (int), total (int), message (str). Example: {'phase': 'features', 'processed': 42, 'total': 200, 'message': 'Analyzing audio (42/200)'}.","created_at":"2026-02-07T01:20:36Z"},{"id":53,"issue_id":"vibedj-cq0.2","author":"Nick Seward","text":"Session hand-off [2026-02-06]: Completed. Created progress_callback closure in run_indexing_job that calls job_manager.update_progress() with structured dict (phase, processed, total, message). Phase labels: metadata='Extracting metadata', features='Analyzing audio'. Passed callback to indexer.index_library(). Added 2 tests in TestRunIndexingJob: one with real JobManager, one with mock verifying exact call sequence (scanning→metadata→features→completed). All 189 Python + 47 UI tests pass. Commit 986732b pushed. Next: vibedj-cq0.3 (UI progress display) and vibedj-cq0.4 (remove tqdm dependency).","created_at":"2026-02-07T02:29:15Z"}]}
{"id":"vibedj-cq0.3","title":"Update UI to display granular indexing progress","description":"Update MusicTab.tsx to render processed/total counts from the progress data (status.progress.processed, status.progress.total) in addition to the existing message. Update the getProgressMessage() function to format richer progress info. Add/update UI tests in MusicTab or related test files to verify progress display with mock status data containing processed/total fields.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:31.412898-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:47:43.805635-05:00","closed_at":"2026-02-06T21:47:43.805635-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.3","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:31.414743-05:00","created_by":"Nick Seward"}],"comments":[{"id":54,"issue_id":"vibedj-cq0.3","author":"Nick Seward","text":"Depends on vibedj-cq0.2 being completed first (needs the backend to actually send progress data). Key files: ui/src/components/MusicTab.tsx (getProgressMessage function around line 96, and the progress indicator JSX around line 213). The backend will send progress as: {phase: string, processed: number, total: number, message: string}. The message field will already contain a human-readable string like 'Analyzing audio (42/200)' so the simplest approach is to just display status.progress.message. The types file ui/src/types.ts or similar may need updating if JobStatusResponse progress is typed. UI tests: check ui/src/components/ for existing MusicTab tests or add new ones.","created_at":"2026-02-07T01:20:38Z"},{"id":55,"issue_id":"vibedj-cq0.3","author":"Nick Seward","text":"Session hand-off [2026-02-06]: Completed. Added processed/total fields to JobStatusResponse type. Replaced static phase label in MusicTab.tsx with animated progress bar (motion.div) showing processed/total count and percentage. Bar only renders when processed/total are available; scanning phase shows message only. Created MusicTab.test.tsx with 9 tests covering progress display, error display, and button states. All 189 Python + 56 UI tests pass. Commit 6cfc621 pushed. Last remaining bead: vibedj-cq0.4 (remove tqdm dependency).","created_at":"2026-02-07T02:47:51Z"}]}
{"id":"vibedj-cq0.4","title":"Remove tqdm from project dependencies","description":"Remove tqdm from pyproject.toml dependencies. Run tests to confirm nothing else depends on it. This should be done after vibedj-cq0.1 removes the tqdm usage from indexer.py.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-06T20:17:36.596367-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T21:50:44.06039-05:00","closed_at":"2026-02-06T21:50:44.06039-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-cq0.4","depends_on_id":"vibedj-cq0","type":"parent-child","created_at":"2026-02-06T20:17:36.598562-05:00","created_by":"Nick Seward"}],"comments":[{"id":56,"issue_id":"vibedj-cq0.4","author":"Nick Seward","text":"Depends on vibedj-cq0.1. After tqdm usage is removed from indexer.py, remove tqdm from pyproject.toml (check [project.dependencies] or [tool.uv] sections). Run 'uv sync' and 'uv run pytest -v' to confirm nothing breaks. Also grep the entire codebase for any remaining tqdm imports before removing.","created_at":"2026-02-07T01:20:39Z"}]}
{"id":"vibedj-gjo","title":"Song Selection Highlighting","description":"When a user selects a song in the search results, the song should be highlighted in the search results. Right now there is no highlighting of the selected song making it hard to see which song is selected. Currently, a \"+\" turns into a checkmark near the result item, but this is insufficient visual feedback.","design":"- When a song is selected, the song row should be highlighted in the search results.\n- Multi-select is already supported; each selected song should be highlighted.\n- The colour of the highlight should be a light colour that matches the theme of the application. A light purple and pink mix would be a good choice.\n- Songs should remain highlighted during and after playlist generation.\n- Highlights are cleared via the existing reset button or by starting a new search.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-04T21:03:44.356556-05:00","created_by":"Nick Seward","updated_at":"2026-02-06T19:57:52.151752-05:00","closed_at":"2026-02-05T19:07:59.173187-05:00"}
{"id":"vibedj-k8i","title":"Epic: Active Profile Selector Feature","description":"Add multi-profile support to Vibe-DJ using SQLite storage, enabling per-profile Subsonic credentials with a 'Shared' default profile and backwards compatibility. Profiles use user-friendly display names (e.g., 'Nick', 'Family'), passwords are encrypted, and the 'Shared' profile is delete-protected. See profile_selector_feature.md for full specification.","status":"open","priority":1,"issue_type":"epic","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:51:47.966679-05:00","created_by":"Nick Seward","updated_at":"2026-02-16T07:51:47.966679-05:00"}
{"id":"vibedj-k8i.1","title":"Profile SQLAlchemy model + ProfileDatabase class with encryption","description":"Create Profile SQLAlchemy model (id, display_name, subsonic_url, subsonic_username, subsonic_password_encrypted, created_at, updated_at) in src/vibe_dj/models/profile.py. Create ProfileDatabase class in src/vibe_dj/core/profile_database.py with CRUD methods (get_profile, get_all_profiles, create_profile, update_profile, delete_profile) and password encryption/decryption using Fernet. Use separate profiles.db file. Add init_db() that creates 'shared' profile if not exists. Export Profile from models/__init__.py. Include unit tests for ProfileDatabase CRUD operations and encryption.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:52:00.244006-05:00","created_by":"Nick Seward","updated_at":"2026-02-16T08:10:00.71141-05:00","closed_at":"2026-02-16T08:10:00.71141-05:00","close_reason":"Implemented Profile SQLAlchemy model and ProfileDatabase class with Fernet encryption. 33 unit tests covering CRUD, encryption, and edge cases. All 260 Python + 113 UI tests passing.","dependencies":[{"issue_id":"vibedj-k8i.1","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:52:00.24531-05:00","created_by":"Nick Seward"}],"comments":[{"id":57,"issue_id":"vibedj-k8i.1","author":"Nick Seward","text":"Session hand-off [2026-02-16]: Completed Profile model + ProfileDatabase with Fernet encryption. Key decisions: used separate profiles.db, Fernet symmetric encryption for passwords, 'Shared' profile is delete-protected and auto-created by init_db(). Files: src/vibe_dj/models/profile.py, src/vibe_dj/core/profile_database.py, tests/unit/core/test_profile_database.py. Commit: 4d965c4. All tests passing (260 Python, 113 UI).","created_at":"2026-02-16T13:10:07Z"}]}
{"id":"vibedj-k8i.2","title":"Profile API routes + dependencies","description":"Create profile API routes in src/vibe_dj/api/routes/profiles.py: GET /profiles (list all), GET /profiles/{profile_id} (get details), POST /profiles (create new), PUT /profiles/{profile_id} (update), DELETE /profiles/{profile_id} (delete, protect 'shared'). Create Pydantic request/response models (ProfileResponse, CreateProfileRequest, UpdateProfileRequest). Add get_profile_database() and get_active_profile() dependencies in src/vibe_dj/api/dependencies.py. Register routes in routes/__init__.py. Include unit tests for all endpoints including 'shared' delete protection.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:52:06.962581-05:00","created_by":"Nick Seward","updated_at":"2026-02-16T09:34:52.614948-05:00","closed_at":"2026-02-16T09:34:52.614948-05:00","close_reason":"Completed: Profile CRUD routes, Pydantic models, get_profile_database/get_active_profile dependencies, 15 unit tests. All quality gates pass.","dependencies":[{"issue_id":"vibedj-k8i.2","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:52:06.964259-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-k8i.2","depends_on_id":"vibedj-k8i.1","type":"blocks","created_at":"2026-02-16T07:52:19.3211-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-k8i.3","title":"Integrate profile credentials into Navidrome sync flow","description":"Modify Navidrome integration to use active profile credentials. Update src/vibe_dj/api/routes/playlist.py (generate_playlist, sync_playlist_to_navidrome) to extract active profile from X-Active-Profile header and use profile credentials with fallback to global config. Update src/vibe_dj/api/routes/config.py /navidrome/test endpoint to optionally use profile credentials. Credential resolution order: request params \u003e active profile \u003e global config. Include unit tests for credential resolution and header extraction.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:52:26.737024-05:00","created_by":"Nick Seward","updated_at":"2026-02-17T18:57:11.127817-05:00","closed_at":"2026-02-17T18:57:11.127817-05:00","close_reason":"Implemented profile credential integration into Navidrome sync flow with full test coverage","dependencies":[{"issue_id":"vibedj-k8i.3","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:52:26.73789-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-k8i.3","depends_on_id":"vibedj-k8i.2","type":"blocks","created_at":"2026-02-16T07:52:29.799672-05:00","created_by":"Nick Seward"}],"comments":[{"id":65,"issue_id":"vibedj-k8i.3","author":"Nick Seward","text":"Session hand-off [2026-02-17]: Completed profile credential integration into Navidrome sync flow. Key decisions: made url/username optional in TestNavidromeRequest (previously required) to support profile-only credential flow. Credential resolution order: request params \u003e active profile \u003e global config applied consistently across /api/playlist, /api/playlist/sync, and /api/navidrome/test. Tests: added TestPlaylistProfileCredentials (4 tests) and TestNavidromeTestProfileCredentials (5 tests). All 289 Python + 131 UI tests pass. Committed as 5c0df43, pushed to origin/master. No blockers. Next: vibedj-k8i.5 (ProfileSelector dropdown) and vibedj-k8i.6 (ProfilesTab) are open and unblocked.","created_at":"2026-02-17T23:57:19Z"}]}
{"id":"vibedj-k8i.4","title":"Frontend profile types, hooks, and context","description":"Add frontend infrastructure for profiles. Create Profile types in ui/src/types/index.ts (Profile, CreateProfileRequest, UpdateProfileRequest). Create useProfiles hook in ui/src/hooks/useProfiles.ts with CRUD operations (fetchProfiles, createProfile, updateProfile, deleteProfile). Create ProfileContext in ui/src/context/ProfileContext.tsx to store active profile ID in context and persist to localStorage. Update useApi.ts to include X-Active-Profile header in all API requests. Include unit tests for useProfiles hook and ProfileContext.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:52:37.883962-05:00","created_by":"Nick Seward","updated_at":"2026-02-16T11:12:28.994593-05:00","closed_at":"2026-02-16T11:12:28.994593-05:00","close_reason":"Completed: Profile types, useProfiles hook, ProfileContext with localStorage persistence, X-Active-Profile header in useApi, ESLint fixes, 17 new unit tests. All quality gates pass.","dependencies":[{"issue_id":"vibedj-k8i.4","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:52:37.885365-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-k8i.4","depends_on_id":"vibedj-k8i.2","type":"blocks","created_at":"2026-02-16T07:52:41.506312-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-k8i.5","title":"ProfileSelector dropdown component","description":"Create ProfileSelector component in ui/src/components/ProfileSelector.tsx. Dropdown showing all profiles fetched from API, with current active profile selected. Include 'Add New Profile' option at bottom that opens a modal/form. Place in header area visible on all screens. Update App.tsx to wrap with ProfileProvider and add ProfileSelector to layout. Style consistent with existing UI (TailwindCSS, Framer Motion). Include unit tests for ProfileSelector rendering and selection behavior.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:52:48.549514-05:00","created_by":"Nick Seward","updated_at":"2026-02-17T21:10:30.44053-05:00","closed_at":"2026-02-17T21:10:30.44053-05:00","close_reason":"ProfileSelector dropdown component implemented with unit tests. Fixed top-right header placement visible on all screens.","dependencies":[{"issue_id":"vibedj-k8i.5","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:52:48.550426-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-k8i.5","depends_on_id":"vibedj-k8i.4","type":"blocks","created_at":"2026-02-16T07:52:52.510333-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-k8i.6","title":"ProfilesTab settings component for profile management","description":"Create ProfilesTab component in ui/src/components/ProfilesTab.tsx. New tab in ConfigScreen for profile management. List existing profiles with Edit/Delete buttons ('shared' profile shows delete disabled). Form for creating/editing profiles: display name, Subsonic URL, username, password fields. Save/Cancel buttons with validation. Update ConfigScreen.tsx to add 'Profiles' tab to tabs array and render ProfilesTab. Style consistent with existing MusicTab/SubSonicTab. Include unit tests for ProfilesTab rendering, form validation, and CRUD interactions.","status":"in_progress","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:53:00.612585-05:00","created_by":"Nick Seward","updated_at":"2026-02-17T21:10:59.637781-05:00","dependencies":[{"issue_id":"vibedj-k8i.6","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:53:00.613624-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-k8i.6","depends_on_id":"vibedj-k8i.4","type":"blocks","created_at":"2026-02-16T07:53:04.385701-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-k8i.7","title":"App startup migration: initialize profiles DB and migrate existing credentials","description":"Add startup initialization logic in src/vibe_dj/app.py. On app startup: initialize profile database, create 'shared' profile if not exists, migrate existing Navidrome credentials from config.json to 'shared' profile (encrypt password). Log migration status. Ensure /data mount includes profiles.db (no Docker changes needed if /data already mounted). Include integration test verifying migration from config.json to 'shared' profile and idempotent re-runs.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-16T07:53:12.670891-05:00","created_by":"Nick Seward","updated_at":"2026-02-17T18:45:26.765754-05:00","closed_at":"2026-02-17T18:45:26.765754-05:00","close_reason":"Implemented _initialize_profiles() in app.py: initializes profile DB on startup, creates Shared profile, migrates Navidrome credentials from config.json (idempotent). 5 integration tests added. All 280 Python + 131 UI tests passing.","dependencies":[{"issue_id":"vibedj-k8i.7","depends_on_id":"vibedj-k8i","type":"parent-child","created_at":"2026-02-16T07:53:12.671817-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-k8i.7","depends_on_id":"vibedj-k8i.1","type":"blocks","created_at":"2026-02-16T07:53:15.755652-05:00","created_by":"Nick Seward"}]}
{"id":"vibedj-n8y","title":"Rename 'Navidrome' to 'SubSonic' in playlist sync UI text","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-12T20:39:56.729978-05:00","created_by":"Nick Seward","updated_at":"2026-02-12T20:46:48.13127-05:00","closed_at":"2026-02-12T20:46:48.13127-05:00","close_reason":"Renamed 3 user-facing Navidrome strings to SubSonic in PlaylistView.tsx. All 56 UI tests pass.","comments":[{"id":58,"issue_id":"vibedj-n8y","author":"Nick Seward","text":"Change 3 user-facing strings in PlaylistView.tsx: 'Send to Navidrome' button → 'Send to SubSonic', success message → 'Playlist sent to SubSonic successfully!', modal title → 'Send to SubSonic'. No test changes needed — existing tests don't assert on these strings.","created_at":"2026-02-13T01:40:16Z"}]}
{"id":"vibedj-v3v","title":"Refactor core and models tests to class-based grouping","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:26:01.923655-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T20:31:02.258867-05:00","closed_at":"2026-02-07T20:31:02.258867-05:00","close_reason":"Closed"}
{"id":"vibedj-wxu","title":"Reduce Dockerfile-Server image size","description":"Docker image for Dockerfile-Server is over 500MB. This epic tracks work to reduce the final image size through build optimizations.","status":"closed","priority":0,"issue_type":"epic","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:47:00.54826-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T21:21:54.440944-05:00","closed_at":"2026-02-07T21:21:54.440944-05:00","close_reason":"Closed","comments":[{"id":59,"issue_id":"vibedj-wxu","author":"Nick Seward","text":"All 5 child beads completed. Final image: 1.45GB (down from 1.83GB baseline, 380MB / 21% reduction). Changes: dropped -dev apt packages, added --no-install-recommends, moved ruff to dev deps, multi-stage Python build, non-editable install.","created_at":"2026-02-08T02:21:50Z"}]}
{"id":"vibedj-wxu.1","title":"Baseline: Build image and run docker history analysis","description":"Build the Dockerfile-Server image and run docker history to get a baseline layer-by-layer size breakdown before making any changes.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:47:06.694257-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T21:00:55.515032-05:00","closed_at":"2026-02-07T21:00:55.515032-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-wxu.1","depends_on_id":"vibedj-wxu","type":"parent-child","created_at":"2026-02-07T20:47:06.697714-05:00","created_by":"Nick Seward"}],"comments":[{"id":60,"issue_id":"vibedj-wxu.1","author":"Nick Seward","text":"Baseline analysis complete. Total image size: 1.83GB. Major layers: apt-get (ffmpeg/libsndfile/dev pkgs) = 619MB, Python deps (uv pip install) = 537MB, uv itself = 58MB, Python base = 45MB, Debian base = 109MB, UI dist = 0.4MB. The apt and Python dep layers are the primary optimization targets.","created_at":"2026-02-08T02:00:51Z"}]}
{"id":"vibedj-wxu.2","title":"Drop -dev packages and add --no-install-recommends","description":"Replace libsndfile1-dev and libmpg123-dev with runtime-only libraries (libsndfile1, libmpg123-0). Add --no-install-recommends to apt-get install. Expected savings: 20-50MB.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:47:11.839623-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T21:03:56.140308-05:00","closed_at":"2026-02-07T21:03:56.140308-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-wxu.2","depends_on_id":"vibedj-wxu","type":"parent-child","created_at":"2026-02-07T20:47:11.844046-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-wxu.2","depends_on_id":"vibedj-wxu.1","type":"blocks","created_at":"2026-02-07T20:47:31.919981-05:00","created_by":"Nick Seward"}],"comments":[{"id":61,"issue_id":"vibedj-wxu.2","author":"Nick Seward","text":"Changes applied to both Dockerfile-Server and Dockerfile. Replaced libsndfile1-dev/libmpg123-dev with libsndfile1/libmpg123-0, added --no-install-recommends. Apt layer: 619MB -\u003e 420MB. Total image: 1.83GB -\u003e 1.57GB (260MB saved). Build and image creation verified successfully.","created_at":"2026-02-08T02:03:52Z"}]}
{"id":"vibedj-wxu.3","title":"Move ruff from production to dev dependencies","description":"Move ruff from project.dependencies to dependency-groups.test (or a new dev group) in pyproject.toml. Ruff is a linter/formatter and should not be in the production Docker image. Expected savings: 30-50MB.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:47:16.902656-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T21:14:58.636296-05:00","closed_at":"2026-02-07T21:14:58.636296-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-wxu.3","depends_on_id":"vibedj-wxu","type":"parent-child","created_at":"2026-02-07T20:47:16.906001-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-wxu.3","depends_on_id":"vibedj-wxu.2","type":"blocks","created_at":"2026-02-07T20:47:35.495489-05:00","created_by":"Nick Seward"}],"comments":[{"id":62,"issue_id":"vibedj-wxu.3","author":"Nick Seward","text":"Moved ruff from project.dependencies to new [dependency-groups] dev group. uv run ruff still works, all 189 tests pass. Image: 1.57GB -\u003e 1.52GB (50MB saved). Cumulative savings from baseline: 1.83GB -\u003e 1.52GB (310MB).","created_at":"2026-02-08T02:14:54Z"}]}
{"id":"vibedj-wxu.4","title":"Multi-stage Python build to exclude pip/uv/build artifacts","description":"Refactor Dockerfile-Server to use a multi-stage build for Python dependencies. Build stage installs uv and dependencies; runtime stage copies only site-packages and entry points. This removes pip, uv, setuptools, and build artifacts from the final image. Expected savings: 50-150MB.","status":"closed","priority":1,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:47:22.571798-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T21:19:50.878982-05:00","closed_at":"2026-02-07T21:19:50.878982-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-wxu.4","depends_on_id":"vibedj-wxu","type":"parent-child","created_at":"2026-02-07T20:47:22.578156-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-wxu.4","depends_on_id":"vibedj-wxu.3","type":"blocks","created_at":"2026-02-07T20:47:38.744326-05:00","created_by":"Nick Seward"}],"comments":[{"id":63,"issue_id":"vibedj-wxu.4","author":"Nick Seward","text":"Multi-stage Python build implemented. Builder stage installs uv and deps, final stage copies only site-packages and uvicorn binary. pip and uv (58MB) excluded from final image. Non-editable install also applied (wxu.5). Smoke test passed: API responds on /api/config. Image: 1.52GB -\u003e 1.45GB (70MB saved). Cumulative from baseline: 1.83GB -\u003e 1.45GB (380MB saved).","created_at":"2026-02-08T02:19:47Z"}]}
{"id":"vibedj-wxu.5","title":"Use non-editable install in Dockerfile-Server","description":"Change 'uv pip install --system --no-cache -e .' to 'uv pip install --system --no-cache .' (remove -e flag). Editable installs are for development only. Expected savings: ~5MB.","status":"closed","priority":2,"issue_type":"task","owner":"nick@homeslice.ca","created_at":"2026-02-07T20:47:27.889124-05:00","created_by":"Nick Seward","updated_at":"2026-02-07T21:20:05.004941-05:00","closed_at":"2026-02-07T21:20:05.004941-05:00","close_reason":"Closed","dependencies":[{"issue_id":"vibedj-wxu.5","depends_on_id":"vibedj-wxu","type":"parent-child","created_at":"2026-02-07T20:47:27.890501-05:00","created_by":"Nick Seward"},{"issue_id":"vibedj-wxu.5","depends_on_id":"vibedj-wxu.4","type":"blocks","created_at":"2026-02-07T20:47:42.191539-05:00","created_by":"Nick Seward"}],"comments":[{"id":64,"issue_id":"vibedj-wxu.5","author":"Nick Seward","text":"Non-editable install was implemented as part of vibedj-wxu.4 (multi-stage build). The Dockerfile-Server now uses 'uv pip install --system --no-cache .' instead of '-e .'. No additional changes needed.","created_at":"2026-02-08T02:20:01Z"}]}
